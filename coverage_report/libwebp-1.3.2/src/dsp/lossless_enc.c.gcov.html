<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.info - libwebp-1.3.2/src/dsp/lossless_enc.c</title>
  <link rel="stylesheet" type="text/css" href="../../../gcov.css">
</head>

<body>

          <table width="100%" border=0 cellspacing=0 cellpadding=0>
            <tr><td class="title">LCOV - code coverage report</td></tr>
            <tr><td class="ruler"><img src="../../../glass.png" width=3 height=3 alt=""></td></tr>

            <tr>
              <td width="100%">
                <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="10%" class="headerValue"><a href="../../../index.html">top level</a> - <a href="index.html">libwebp-1.3.2/src/dsp</a> - lossless_enc.c<span style="font-size: 80%;"> (source / <a href="lossless_enc.c.func-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="5%"></td>
            <td width="5%" class="headerCovTableHead">Coverage</td>
            <td width="5%" class="headerCovTableHead" title="Covered + Uncovered code">Total</td>
            <td width="5%" class="headerCovTableHead" title="Exercised code only">Hit</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntryLo">0.0&nbsp;%</td>
            <td class="headerCovTableEntry">301</td>
            <td class="headerCovTableEntry">0</td>
          </tr>
          <tr>
            <td class="headerItem">Test Date:</td>
            <td class="headerValue">2026-02-03 18:12:40</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntryLo">0.0&nbsp;%</td>
            <td class="headerCovTableEntry">39</td>
            <td class="headerCovTableEntry">0</td>
          </tr>
          <tr>
            <td class="headerItem">Legend:</td>
            <td class="headerValueLeg">            Lines:
            <span class="coverLegendCov">hit</span>
            <span class="coverLegendNoCov">not hit</span>
            | Branches:
            <span class="coverLegendCov">+</span> taken
            <span class="coverLegendNoCov">-</span> not taken
            <span class="coverLegendNoCov">#</span> not executed
</td>
            <td></td>
            <td class="headerItem">Branches:</td>
            <td class="headerCovTableEntryHi">-</td>
            <td class="headerCovTableEntry">0</td>
            <td class="headerCovTableEntry">0</td>
          </tr>
                  <tr><td><img src="../../../glass.png" width=3 height=3 alt=""></td></tr>
                </table>
              </td>
            </tr>

            <tr><td class="ruler"><img src="../../../glass.png" width=3 height=3 alt=""></td></tr>
          </table>

          <table cellpadding=0 cellspacing=0 border=0>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td>
<pre class="sourceHeading">             Branch data     Line data    Source code</pre>
<pre class="source">
<span id="L1"><span class="lineNum">       1</span>                 :             : // Copyright 2015 Google Inc. All Rights Reserved.</span>
<span id="L2"><span class="lineNum">       2</span>                 :             : //</span>
<span id="L3"><span class="lineNum">       3</span>                 :             : // Use of this source code is governed by a BSD-style license</span>
<span id="L4"><span class="lineNum">       4</span>                 :             : // that can be found in the COPYING file in the root of the source</span>
<span id="L5"><span class="lineNum">       5</span>                 :             : // tree. An additional intellectual property rights grant can be found</span>
<span id="L6"><span class="lineNum">       6</span>                 :             : // in the file PATENTS. All contributing project authors may</span>
<span id="L7"><span class="lineNum">       7</span>                 :             : // be found in the AUTHORS file in the root of the source tree.</span>
<span id="L8"><span class="lineNum">       8</span>                 :             : // -----------------------------------------------------------------------------</span>
<span id="L9"><span class="lineNum">       9</span>                 :             : //</span>
<span id="L10"><span class="lineNum">      10</span>                 :             : // Image transform methods for lossless encoder.</span>
<span id="L11"><span class="lineNum">      11</span>                 :             : //</span>
<span id="L12"><span class="lineNum">      12</span>                 :             : // Authors: Vikas Arora (vikaas.arora@gmail.com)</span>
<span id="L13"><span class="lineNum">      13</span>                 :             : //          Jyrki Alakuijala (jyrki@google.com)</span>
<span id="L14"><span class="lineNum">      14</span>                 :             : //          Urvang Joshi (urvang@google.com)</span>
<span id="L15"><span class="lineNum">      15</span>                 :             : </span>
<span id="L16"><span class="lineNum">      16</span>                 :             : #include &quot;src/dsp/dsp.h&quot;</span>
<span id="L17"><span class="lineNum">      17</span>                 :             : </span>
<span id="L18"><span class="lineNum">      18</span>                 :             : #include &lt;assert.h&gt;</span>
<span id="L19"><span class="lineNum">      19</span>                 :             : #include &lt;math.h&gt;</span>
<span id="L20"><span class="lineNum">      20</span>                 :             : #include &lt;stdlib.h&gt;</span>
<span id="L21"><span class="lineNum">      21</span>                 :             : #include &quot;src/dec/vp8li_dec.h&quot;</span>
<span id="L22"><span class="lineNum">      22</span>                 :             : #include &quot;src/utils/endian_inl_utils.h&quot;</span>
<span id="L23"><span class="lineNum">      23</span>                 :             : #include &quot;src/dsp/lossless.h&quot;</span>
<span id="L24"><span class="lineNum">      24</span>                 :             : #include &quot;src/dsp/lossless_common.h&quot;</span>
<span id="L25"><span class="lineNum">      25</span>                 :             : #include &quot;src/dsp/yuv.h&quot;</span>
<span id="L26"><span class="lineNum">      26</span>                 :             : </span>
<span id="L27"><span class="lineNum">      27</span>                 :             : // lookup table for small values of log2(int)</span>
<span id="L28"><span class="lineNum">      28</span>                 :             : const float kLog2Table[LOG_LOOKUP_IDX_MAX] = {</span>
<span id="L29"><span class="lineNum">      29</span>                 :             :   0.0000000000000000f, 0.0000000000000000f,</span>
<span id="L30"><span class="lineNum">      30</span>                 :             :   1.0000000000000000f, 1.5849625007211560f,</span>
<span id="L31"><span class="lineNum">      31</span>                 :             :   2.0000000000000000f, 2.3219280948873621f,</span>
<span id="L32"><span class="lineNum">      32</span>                 :             :   2.5849625007211560f, 2.8073549220576041f,</span>
<span id="L33"><span class="lineNum">      33</span>                 :             :   3.0000000000000000f, 3.1699250014423121f,</span>
<span id="L34"><span class="lineNum">      34</span>                 :             :   3.3219280948873621f, 3.4594316186372973f,</span>
<span id="L35"><span class="lineNum">      35</span>                 :             :   3.5849625007211560f, 3.7004397181410921f,</span>
<span id="L36"><span class="lineNum">      36</span>                 :             :   3.8073549220576041f, 3.9068905956085187f,</span>
<span id="L37"><span class="lineNum">      37</span>                 :             :   4.0000000000000000f, 4.0874628412503390f,</span>
<span id="L38"><span class="lineNum">      38</span>                 :             :   4.1699250014423121f, 4.2479275134435852f,</span>
<span id="L39"><span class="lineNum">      39</span>                 :             :   4.3219280948873626f, 4.3923174227787606f,</span>
<span id="L40"><span class="lineNum">      40</span>                 :             :   4.4594316186372973f, 4.5235619560570130f,</span>
<span id="L41"><span class="lineNum">      41</span>                 :             :   4.5849625007211560f, 4.6438561897747243f,</span>
<span id="L42"><span class="lineNum">      42</span>                 :             :   4.7004397181410917f, 4.7548875021634682f,</span>
<span id="L43"><span class="lineNum">      43</span>                 :             :   4.8073549220576037f, 4.8579809951275718f,</span>
<span id="L44"><span class="lineNum">      44</span>                 :             :   4.9068905956085187f, 4.9541963103868749f,</span>
<span id="L45"><span class="lineNum">      45</span>                 :             :   5.0000000000000000f, 5.0443941193584533f,</span>
<span id="L46"><span class="lineNum">      46</span>                 :             :   5.0874628412503390f, 5.1292830169449663f,</span>
<span id="L47"><span class="lineNum">      47</span>                 :             :   5.1699250014423121f, 5.2094533656289501f,</span>
<span id="L48"><span class="lineNum">      48</span>                 :             :   5.2479275134435852f, 5.2854022188622487f,</span>
<span id="L49"><span class="lineNum">      49</span>                 :             :   5.3219280948873626f, 5.3575520046180837f,</span>
<span id="L50"><span class="lineNum">      50</span>                 :             :   5.3923174227787606f, 5.4262647547020979f,</span>
<span id="L51"><span class="lineNum">      51</span>                 :             :   5.4594316186372973f, 5.4918530963296747f,</span>
<span id="L52"><span class="lineNum">      52</span>                 :             :   5.5235619560570130f, 5.5545888516776376f,</span>
<span id="L53"><span class="lineNum">      53</span>                 :             :   5.5849625007211560f, 5.6147098441152083f,</span>
<span id="L54"><span class="lineNum">      54</span>                 :             :   5.6438561897747243f, 5.6724253419714951f,</span>
<span id="L55"><span class="lineNum">      55</span>                 :             :   5.7004397181410917f, 5.7279204545631987f,</span>
<span id="L56"><span class="lineNum">      56</span>                 :             :   5.7548875021634682f, 5.7813597135246599f,</span>
<span id="L57"><span class="lineNum">      57</span>                 :             :   5.8073549220576037f, 5.8328900141647412f,</span>
<span id="L58"><span class="lineNum">      58</span>                 :             :   5.8579809951275718f, 5.8826430493618415f,</span>
<span id="L59"><span class="lineNum">      59</span>                 :             :   5.9068905956085187f, 5.9307373375628866f,</span>
<span id="L60"><span class="lineNum">      60</span>                 :             :   5.9541963103868749f, 5.9772799234999167f,</span>
<span id="L61"><span class="lineNum">      61</span>                 :             :   6.0000000000000000f, 6.0223678130284543f,</span>
<span id="L62"><span class="lineNum">      62</span>                 :             :   6.0443941193584533f, 6.0660891904577720f,</span>
<span id="L63"><span class="lineNum">      63</span>                 :             :   6.0874628412503390f, 6.1085244567781691f,</span>
<span id="L64"><span class="lineNum">      64</span>                 :             :   6.1292830169449663f, 6.1497471195046822f,</span>
<span id="L65"><span class="lineNum">      65</span>                 :             :   6.1699250014423121f, 6.1898245588800175f,</span>
<span id="L66"><span class="lineNum">      66</span>                 :             :   6.2094533656289501f, 6.2288186904958804f,</span>
<span id="L67"><span class="lineNum">      67</span>                 :             :   6.2479275134435852f, 6.2667865406949010f,</span>
<span id="L68"><span class="lineNum">      68</span>                 :             :   6.2854022188622487f, 6.3037807481771030f,</span>
<span id="L69"><span class="lineNum">      69</span>                 :             :   6.3219280948873626f, 6.3398500028846243f,</span>
<span id="L70"><span class="lineNum">      70</span>                 :             :   6.3575520046180837f, 6.3750394313469245f,</span>
<span id="L71"><span class="lineNum">      71</span>                 :             :   6.3923174227787606f, 6.4093909361377017f,</span>
<span id="L72"><span class="lineNum">      72</span>                 :             :   6.4262647547020979f, 6.4429434958487279f,</span>
<span id="L73"><span class="lineNum">      73</span>                 :             :   6.4594316186372973f, 6.4757334309663976f,</span>
<span id="L74"><span class="lineNum">      74</span>                 :             :   6.4918530963296747f, 6.5077946401986963f,</span>
<span id="L75"><span class="lineNum">      75</span>                 :             :   6.5235619560570130f, 6.5391588111080309f,</span>
<span id="L76"><span class="lineNum">      76</span>                 :             :   6.5545888516776376f, 6.5698556083309478f,</span>
<span id="L77"><span class="lineNum">      77</span>                 :             :   6.5849625007211560f, 6.5999128421871278f,</span>
<span id="L78"><span class="lineNum">      78</span>                 :             :   6.6147098441152083f, 6.6293566200796094f,</span>
<span id="L79"><span class="lineNum">      79</span>                 :             :   6.6438561897747243f, 6.6582114827517946f,</span>
<span id="L80"><span class="lineNum">      80</span>                 :             :   6.6724253419714951f, 6.6865005271832185f,</span>
<span id="L81"><span class="lineNum">      81</span>                 :             :   6.7004397181410917f, 6.7142455176661224f,</span>
<span id="L82"><span class="lineNum">      82</span>                 :             :   6.7279204545631987f, 6.7414669864011464f,</span>
<span id="L83"><span class="lineNum">      83</span>                 :             :   6.7548875021634682f, 6.7681843247769259f,</span>
<span id="L84"><span class="lineNum">      84</span>                 :             :   6.7813597135246599f, 6.7944158663501061f,</span>
<span id="L85"><span class="lineNum">      85</span>                 :             :   6.8073549220576037f, 6.8201789624151878f,</span>
<span id="L86"><span class="lineNum">      86</span>                 :             :   6.8328900141647412f, 6.8454900509443747f,</span>
<span id="L87"><span class="lineNum">      87</span>                 :             :   6.8579809951275718f, 6.8703647195834047f,</span>
<span id="L88"><span class="lineNum">      88</span>                 :             :   6.8826430493618415f, 6.8948177633079437f,</span>
<span id="L89"><span class="lineNum">      89</span>                 :             :   6.9068905956085187f, 6.9188632372745946f,</span>
<span id="L90"><span class="lineNum">      90</span>                 :             :   6.9307373375628866f, 6.9425145053392398f,</span>
<span id="L91"><span class="lineNum">      91</span>                 :             :   6.9541963103868749f, 6.9657842846620869f,</span>
<span id="L92"><span class="lineNum">      92</span>                 :             :   6.9772799234999167f, 6.9886846867721654f,</span>
<span id="L93"><span class="lineNum">      93</span>                 :             :   7.0000000000000000f, 7.0112272554232539f,</span>
<span id="L94"><span class="lineNum">      94</span>                 :             :   7.0223678130284543f, 7.0334230015374501f,</span>
<span id="L95"><span class="lineNum">      95</span>                 :             :   7.0443941193584533f, 7.0552824355011898f,</span>
<span id="L96"><span class="lineNum">      96</span>                 :             :   7.0660891904577720f, 7.0768155970508308f,</span>
<span id="L97"><span class="lineNum">      97</span>                 :             :   7.0874628412503390f, 7.0980320829605263f,</span>
<span id="L98"><span class="lineNum">      98</span>                 :             :   7.1085244567781691f, 7.1189410727235076f,</span>
<span id="L99"><span class="lineNum">      99</span>                 :             :   7.1292830169449663f, 7.1395513523987936f,</span>
<span id="L100"><span class="lineNum">     100</span>                 :             :   7.1497471195046822f, 7.1598713367783890f,</span>
<span id="L101"><span class="lineNum">     101</span>                 :             :   7.1699250014423121f, 7.1799090900149344f,</span>
<span id="L102"><span class="lineNum">     102</span>                 :             :   7.1898245588800175f, 7.1996723448363644f,</span>
<span id="L103"><span class="lineNum">     103</span>                 :             :   7.2094533656289501f, 7.2191685204621611f,</span>
<span id="L104"><span class="lineNum">     104</span>                 :             :   7.2288186904958804f, 7.2384047393250785f,</span>
<span id="L105"><span class="lineNum">     105</span>                 :             :   7.2479275134435852f, 7.2573878426926521f,</span>
<span id="L106"><span class="lineNum">     106</span>                 :             :   7.2667865406949010f, 7.2761244052742375f,</span>
<span id="L107"><span class="lineNum">     107</span>                 :             :   7.2854022188622487f, 7.2946207488916270f,</span>
<span id="L108"><span class="lineNum">     108</span>                 :             :   7.3037807481771030f, 7.3128829552843557f,</span>
<span id="L109"><span class="lineNum">     109</span>                 :             :   7.3219280948873626f, 7.3309168781146167f,</span>
<span id="L110"><span class="lineNum">     110</span>                 :             :   7.3398500028846243f, 7.3487281542310771f,</span>
<span id="L111"><span class="lineNum">     111</span>                 :             :   7.3575520046180837f, 7.3663222142458160f,</span>
<span id="L112"><span class="lineNum">     112</span>                 :             :   7.3750394313469245f, 7.3837042924740519f,</span>
<span id="L113"><span class="lineNum">     113</span>                 :             :   7.3923174227787606f, 7.4008794362821843f,</span>
<span id="L114"><span class="lineNum">     114</span>                 :             :   7.4093909361377017f, 7.4178525148858982f,</span>
<span id="L115"><span class="lineNum">     115</span>                 :             :   7.4262647547020979f, 7.4346282276367245f,</span>
<span id="L116"><span class="lineNum">     116</span>                 :             :   7.4429434958487279f, 7.4512111118323289f,</span>
<span id="L117"><span class="lineNum">     117</span>                 :             :   7.4594316186372973f, 7.4676055500829976f,</span>
<span id="L118"><span class="lineNum">     118</span>                 :             :   7.4757334309663976f, 7.4838157772642563f,</span>
<span id="L119"><span class="lineNum">     119</span>                 :             :   7.4918530963296747f, 7.4998458870832056f,</span>
<span id="L120"><span class="lineNum">     120</span>                 :             :   7.5077946401986963f, 7.5156998382840427f,</span>
<span id="L121"><span class="lineNum">     121</span>                 :             :   7.5235619560570130f, 7.5313814605163118f,</span>
<span id="L122"><span class="lineNum">     122</span>                 :             :   7.5391588111080309f, 7.5468944598876364f,</span>
<span id="L123"><span class="lineNum">     123</span>                 :             :   7.5545888516776376f, 7.5622424242210728f,</span>
<span id="L124"><span class="lineNum">     124</span>                 :             :   7.5698556083309478f, 7.5774288280357486f,</span>
<span id="L125"><span class="lineNum">     125</span>                 :             :   7.5849625007211560f, 7.5924570372680806f,</span>
<span id="L126"><span class="lineNum">     126</span>                 :             :   7.5999128421871278f, 7.6073303137496104f,</span>
<span id="L127"><span class="lineNum">     127</span>                 :             :   7.6147098441152083f, 7.6220518194563764f,</span>
<span id="L128"><span class="lineNum">     128</span>                 :             :   7.6293566200796094f, 7.6366246205436487f,</span>
<span id="L129"><span class="lineNum">     129</span>                 :             :   7.6438561897747243f, 7.6510516911789281f,</span>
<span id="L130"><span class="lineNum">     130</span>                 :             :   7.6582114827517946f, 7.6653359171851764f,</span>
<span id="L131"><span class="lineNum">     131</span>                 :             :   7.6724253419714951f, 7.6794800995054464f,</span>
<span id="L132"><span class="lineNum">     132</span>                 :             :   7.6865005271832185f, 7.6934869574993252f,</span>
<span id="L133"><span class="lineNum">     133</span>                 :             :   7.7004397181410917f, 7.7073591320808825f,</span>
<span id="L134"><span class="lineNum">     134</span>                 :             :   7.7142455176661224f, 7.7210991887071855f,</span>
<span id="L135"><span class="lineNum">     135</span>                 :             :   7.7279204545631987f, 7.7347096202258383f,</span>
<span id="L136"><span class="lineNum">     136</span>                 :             :   7.7414669864011464f, 7.7481928495894605f,</span>
<span id="L137"><span class="lineNum">     137</span>                 :             :   7.7548875021634682f, 7.7615512324444795f,</span>
<span id="L138"><span class="lineNum">     138</span>                 :             :   7.7681843247769259f, 7.7747870596011736f,</span>
<span id="L139"><span class="lineNum">     139</span>                 :             :   7.7813597135246599f, 7.7879025593914317f,</span>
<span id="L140"><span class="lineNum">     140</span>                 :             :   7.7944158663501061f, 7.8008998999203047f,</span>
<span id="L141"><span class="lineNum">     141</span>                 :             :   7.8073549220576037f, 7.8137811912170374f,</span>
<span id="L142"><span class="lineNum">     142</span>                 :             :   7.8201789624151878f, 7.8265484872909150f,</span>
<span id="L143"><span class="lineNum">     143</span>                 :             :   7.8328900141647412f, 7.8392037880969436f,</span>
<span id="L144"><span class="lineNum">     144</span>                 :             :   7.8454900509443747f, 7.8517490414160571f,</span>
<span id="L145"><span class="lineNum">     145</span>                 :             :   7.8579809951275718f, 7.8641861446542797f,</span>
<span id="L146"><span class="lineNum">     146</span>                 :             :   7.8703647195834047f, 7.8765169465649993f,</span>
<span id="L147"><span class="lineNum">     147</span>                 :             :   7.8826430493618415f, 7.8887432488982591f,</span>
<span id="L148"><span class="lineNum">     148</span>                 :             :   7.8948177633079437f, 7.9008668079807486f,</span>
<span id="L149"><span class="lineNum">     149</span>                 :             :   7.9068905956085187f, 7.9128893362299619f,</span>
<span id="L150"><span class="lineNum">     150</span>                 :             :   7.9188632372745946f, 7.9248125036057812f,</span>
<span id="L151"><span class="lineNum">     151</span>                 :             :   7.9307373375628866f, 7.9366379390025709f,</span>
<span id="L152"><span class="lineNum">     152</span>                 :             :   7.9425145053392398f, 7.9483672315846778f,</span>
<span id="L153"><span class="lineNum">     153</span>                 :             :   7.9541963103868749f, 7.9600019320680805f,</span>
<span id="L154"><span class="lineNum">     154</span>                 :             :   7.9657842846620869f, 7.9715435539507719f,</span>
<span id="L155"><span class="lineNum">     155</span>                 :             :   7.9772799234999167f, 7.9829935746943103f,</span>
<span id="L156"><span class="lineNum">     156</span>                 :             :   7.9886846867721654f, 7.9943534368588577f</span>
<span id="L157"><span class="lineNum">     157</span>                 :             : };</span>
<span id="L158"><span class="lineNum">     158</span>                 :             : </span>
<span id="L159"><span class="lineNum">     159</span>                 :             : const float kSLog2Table[LOG_LOOKUP_IDX_MAX] = {</span>
<span id="L160"><span class="lineNum">     160</span>                 :             :   0.00000000f,    0.00000000f,  2.00000000f,   4.75488750f,</span>
<span id="L161"><span class="lineNum">     161</span>                 :             :   8.00000000f,   11.60964047f,  15.50977500f,  19.65148445f,</span>
<span id="L162"><span class="lineNum">     162</span>                 :             :   24.00000000f,  28.52932501f,  33.21928095f,  38.05374781f,</span>
<span id="L163"><span class="lineNum">     163</span>                 :             :   43.01955001f,  48.10571634f,  53.30296891f,  58.60335893f,</span>
<span id="L164"><span class="lineNum">     164</span>                 :             :   64.00000000f,  69.48686830f,  75.05865003f,  80.71062276f,</span>
<span id="L165"><span class="lineNum">     165</span>                 :             :   86.43856190f,  92.23866588f,  98.10749561f,  104.04192499f,</span>
<span id="L166"><span class="lineNum">     166</span>                 :             :   110.03910002f, 116.09640474f, 122.21143267f, 128.38196256f,</span>
<span id="L167"><span class="lineNum">     167</span>                 :             :   134.60593782f, 140.88144886f, 147.20671787f, 153.58008562f,</span>
<span id="L168"><span class="lineNum">     168</span>                 :             :   160.00000000f, 166.46500594f, 172.97373660f, 179.52490559f,</span>
<span id="L169"><span class="lineNum">     169</span>                 :             :   186.11730005f, 192.74977453f, 199.42124551f, 206.13068654f,</span>
<span id="L170"><span class="lineNum">     170</span>                 :             :   212.87712380f, 219.65963219f, 226.47733176f, 233.32938445f,</span>
<span id="L171"><span class="lineNum">     171</span>                 :             :   240.21499122f, 247.13338933f, 254.08384998f, 261.06567603f,</span>
<span id="L172"><span class="lineNum">     172</span>                 :             :   268.07820003f, 275.12078236f, 282.19280949f, 289.29369244f,</span>
<span id="L173"><span class="lineNum">     173</span>                 :             :   296.42286534f, 303.57978409f, 310.76392512f, 317.97478424f,</span>
<span id="L174"><span class="lineNum">     174</span>                 :             :   325.21187564f, 332.47473081f, 339.76289772f, 347.07593991f,</span>
<span id="L175"><span class="lineNum">     175</span>                 :             :   354.41343574f, 361.77497759f, 369.16017124f, 376.56863518f,</span>
<span id="L176"><span class="lineNum">     176</span>                 :             :   384.00000000f, 391.45390785f, 398.93001188f, 406.42797576f,</span>
<span id="L177"><span class="lineNum">     177</span>                 :             :   413.94747321f, 421.48818752f, 429.04981119f, 436.63204548f,</span>
<span id="L178"><span class="lineNum">     178</span>                 :             :   444.23460010f, 451.85719280f, 459.49954906f, 467.16140179f,</span>
<span id="L179"><span class="lineNum">     179</span>                 :             :   474.84249102f, 482.54256363f, 490.26137307f, 497.99867911f,</span>
<span id="L180"><span class="lineNum">     180</span>                 :             :   505.75424759f, 513.52785023f, 521.31926438f, 529.12827280f,</span>
<span id="L181"><span class="lineNum">     181</span>                 :             :   536.95466351f, 544.79822957f, 552.65876890f, 560.53608414f,</span>
<span id="L182"><span class="lineNum">     182</span>                 :             :   568.42998244f, 576.34027536f, 584.26677867f, 592.20931226f,</span>
<span id="L183"><span class="lineNum">     183</span>                 :             :   600.16769996f, 608.14176943f, 616.13135206f, 624.13628279f,</span>
<span id="L184"><span class="lineNum">     184</span>                 :             :   632.15640007f, 640.19154569f, 648.24156472f, 656.30630539f,</span>
<span id="L185"><span class="lineNum">     185</span>                 :             :   664.38561898f, 672.47935976f, 680.58738488f, 688.70955430f,</span>
<span id="L186"><span class="lineNum">     186</span>                 :             :   696.84573069f, 704.99577935f, 713.15956818f, 721.33696754f,</span>
<span id="L187"><span class="lineNum">     187</span>                 :             :   729.52785023f, 737.73209140f, 745.94956849f, 754.18016116f,</span>
<span id="L188"><span class="lineNum">     188</span>                 :             :   762.42375127f, 770.68022275f, 778.94946161f, 787.23135586f,</span>
<span id="L189"><span class="lineNum">     189</span>                 :             :   795.52579543f, 803.83267219f, 812.15187982f, 820.48331383f,</span>
<span id="L190"><span class="lineNum">     190</span>                 :             :   828.82687147f, 837.18245171f, 845.54995518f, 853.92928416f,</span>
<span id="L191"><span class="lineNum">     191</span>                 :             :   862.32034249f, 870.72303558f, 879.13727036f, 887.56295522f,</span>
<span id="L192"><span class="lineNum">     192</span>                 :             :   896.00000000f, 904.44831595f, 912.90781569f, 921.37841320f,</span>
<span id="L193"><span class="lineNum">     193</span>                 :             :   929.86002376f, 938.35256392f, 946.85595152f, 955.37010560f,</span>
<span id="L194"><span class="lineNum">     194</span>                 :             :   963.89494641f, 972.43039537f, 980.97637504f, 989.53280911f,</span>
<span id="L195"><span class="lineNum">     195</span>                 :             :   998.09962237f, 1006.67674069f, 1015.26409097f, 1023.86160116f,</span>
<span id="L196"><span class="lineNum">     196</span>                 :             :   1032.46920021f, 1041.08681805f, 1049.71438560f, 1058.35183469f,</span>
<span id="L197"><span class="lineNum">     197</span>                 :             :   1066.99909811f, 1075.65610955f, 1084.32280357f, 1092.99911564f,</span>
<span id="L198"><span class="lineNum">     198</span>                 :             :   1101.68498204f, 1110.38033993f, 1119.08512727f, 1127.79928282f,</span>
<span id="L199"><span class="lineNum">     199</span>                 :             :   1136.52274614f, 1145.25545758f, 1153.99735821f, 1162.74838989f,</span>
<span id="L200"><span class="lineNum">     200</span>                 :             :   1171.50849518f, 1180.27761738f, 1189.05570047f, 1197.84268914f,</span>
<span id="L201"><span class="lineNum">     201</span>                 :             :   1206.63852876f, 1215.44316535f, 1224.25654560f, 1233.07861684f,</span>
<span id="L202"><span class="lineNum">     202</span>                 :             :   1241.90932703f, 1250.74862473f, 1259.59645914f, 1268.45278005f,</span>
<span id="L203"><span class="lineNum">     203</span>                 :             :   1277.31753781f, 1286.19068338f, 1295.07216828f, 1303.96194457f,</span>
<span id="L204"><span class="lineNum">     204</span>                 :             :   1312.85996488f, 1321.76618236f, 1330.68055071f, 1339.60302413f,</span>
<span id="L205"><span class="lineNum">     205</span>                 :             :   1348.53355734f, 1357.47210556f, 1366.41862452f, 1375.37307041f,</span>
<span id="L206"><span class="lineNum">     206</span>                 :             :   1384.33539991f, 1393.30557020f, 1402.28353887f, 1411.26926400f,</span>
<span id="L207"><span class="lineNum">     207</span>                 :             :   1420.26270412f, 1429.26381818f, 1438.27256558f, 1447.28890615f,</span>
<span id="L208"><span class="lineNum">     208</span>                 :             :   1456.31280014f, 1465.34420819f, 1474.38309138f, 1483.42941118f,</span>
<span id="L209"><span class="lineNum">     209</span>                 :             :   1492.48312945f, 1501.54420843f, 1510.61261078f, 1519.68829949f,</span>
<span id="L210"><span class="lineNum">     210</span>                 :             :   1528.77123795f, 1537.86138993f, 1546.95871952f, 1556.06319119f,</span>
<span id="L211"><span class="lineNum">     211</span>                 :             :   1565.17476976f, 1574.29342040f, 1583.41910860f, 1592.55180020f,</span>
<span id="L212"><span class="lineNum">     212</span>                 :             :   1601.69146137f, 1610.83805860f, 1619.99155871f, 1629.15192882f,</span>
<span id="L213"><span class="lineNum">     213</span>                 :             :   1638.31913637f, 1647.49314911f, 1656.67393509f, 1665.86146266f,</span>
<span id="L214"><span class="lineNum">     214</span>                 :             :   1675.05570047f, 1684.25661744f, 1693.46418280f, 1702.67836605f,</span>
<span id="L215"><span class="lineNum">     215</span>                 :             :   1711.89913698f, 1721.12646563f, 1730.36032233f, 1739.60067768f,</span>
<span id="L216"><span class="lineNum">     216</span>                 :             :   1748.84750254f, 1758.10076802f, 1767.36044551f, 1776.62650662f,</span>
<span id="L217"><span class="lineNum">     217</span>                 :             :   1785.89892323f, 1795.17766747f, 1804.46271172f, 1813.75402857f,</span>
<span id="L218"><span class="lineNum">     218</span>                 :             :   1823.05159087f, 1832.35537170f, 1841.66534438f, 1850.98148244f,</span>
<span id="L219"><span class="lineNum">     219</span>                 :             :   1860.30375965f, 1869.63214999f, 1878.96662767f, 1888.30716711f,</span>
<span id="L220"><span class="lineNum">     220</span>                 :             :   1897.65374295f, 1907.00633003f, 1916.36490342f, 1925.72943838f,</span>
<span id="L221"><span class="lineNum">     221</span>                 :             :   1935.09991037f, 1944.47629506f, 1953.85856831f, 1963.24670620f,</span>
<span id="L222"><span class="lineNum">     222</span>                 :             :   1972.64068498f, 1982.04048108f, 1991.44607117f, 2000.85743204f,</span>
<span id="L223"><span class="lineNum">     223</span>                 :             :   2010.27454072f, 2019.69737440f, 2029.12591044f, 2038.56012640f</span>
<span id="L224"><span class="lineNum">     224</span>                 :             : };</span>
<span id="L225"><span class="lineNum">     225</span>                 :             : </span>
<span id="L226"><span class="lineNum">     226</span>                 :             : const VP8LPrefixCode kPrefixEncodeCode[PREFIX_LOOKUP_IDX_MAX] = {</span>
<span id="L227"><span class="lineNum">     227</span>                 :             :   { 0, 0}, { 0, 0}, { 1, 0}, { 2, 0}, { 3, 0}, { 4, 1}, { 4, 1}, { 5, 1},</span>
<span id="L228"><span class="lineNum">     228</span>                 :             :   { 5, 1}, { 6, 2}, { 6, 2}, { 6, 2}, { 6, 2}, { 7, 2}, { 7, 2}, { 7, 2},</span>
<span id="L229"><span class="lineNum">     229</span>                 :             :   { 7, 2}, { 8, 3}, { 8, 3}, { 8, 3}, { 8, 3}, { 8, 3}, { 8, 3}, { 8, 3},</span>
<span id="L230"><span class="lineNum">     230</span>                 :             :   { 8, 3}, { 9, 3}, { 9, 3}, { 9, 3}, { 9, 3}, { 9, 3}, { 9, 3}, { 9, 3},</span>
<span id="L231"><span class="lineNum">     231</span>                 :             :   { 9, 3}, {10, 4}, {10, 4}, {10, 4}, {10, 4}, {10, 4}, {10, 4}, {10, 4},</span>
<span id="L232"><span class="lineNum">     232</span>                 :             :   {10, 4}, {10, 4}, {10, 4}, {10, 4}, {10, 4}, {10, 4}, {10, 4}, {10, 4},</span>
<span id="L233"><span class="lineNum">     233</span>                 :             :   {10, 4}, {11, 4}, {11, 4}, {11, 4}, {11, 4}, {11, 4}, {11, 4}, {11, 4},</span>
<span id="L234"><span class="lineNum">     234</span>                 :             :   {11, 4}, {11, 4}, {11, 4}, {11, 4}, {11, 4}, {11, 4}, {11, 4}, {11, 4},</span>
<span id="L235"><span class="lineNum">     235</span>                 :             :   {11, 4}, {12, 5}, {12, 5}, {12, 5}, {12, 5}, {12, 5}, {12, 5}, {12, 5},</span>
<span id="L236"><span class="lineNum">     236</span>                 :             :   {12, 5}, {12, 5}, {12, 5}, {12, 5}, {12, 5}, {12, 5}, {12, 5}, {12, 5},</span>
<span id="L237"><span class="lineNum">     237</span>                 :             :   {12, 5}, {12, 5}, {12, 5}, {12, 5}, {12, 5}, {12, 5}, {12, 5}, {12, 5},</span>
<span id="L238"><span class="lineNum">     238</span>                 :             :   {12, 5}, {12, 5}, {12, 5}, {12, 5}, {12, 5}, {12, 5}, {12, 5}, {12, 5},</span>
<span id="L239"><span class="lineNum">     239</span>                 :             :   {12, 5}, {13, 5}, {13, 5}, {13, 5}, {13, 5}, {13, 5}, {13, 5}, {13, 5},</span>
<span id="L240"><span class="lineNum">     240</span>                 :             :   {13, 5}, {13, 5}, {13, 5}, {13, 5}, {13, 5}, {13, 5}, {13, 5}, {13, 5},</span>
<span id="L241"><span class="lineNum">     241</span>                 :             :   {13, 5}, {13, 5}, {13, 5}, {13, 5}, {13, 5}, {13, 5}, {13, 5}, {13, 5},</span>
<span id="L242"><span class="lineNum">     242</span>                 :             :   {13, 5}, {13, 5}, {13, 5}, {13, 5}, {13, 5}, {13, 5}, {13, 5}, {13, 5},</span>
<span id="L243"><span class="lineNum">     243</span>                 :             :   {13, 5}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6},</span>
<span id="L244"><span class="lineNum">     244</span>                 :             :   {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6},</span>
<span id="L245"><span class="lineNum">     245</span>                 :             :   {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6},</span>
<span id="L246"><span class="lineNum">     246</span>                 :             :   {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6},</span>
<span id="L247"><span class="lineNum">     247</span>                 :             :   {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6},</span>
<span id="L248"><span class="lineNum">     248</span>                 :             :   {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6},</span>
<span id="L249"><span class="lineNum">     249</span>                 :             :   {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6},</span>
<span id="L250"><span class="lineNum">     250</span>                 :             :   {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6}, {14, 6},</span>
<span id="L251"><span class="lineNum">     251</span>                 :             :   {14, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6},</span>
<span id="L252"><span class="lineNum">     252</span>                 :             :   {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6},</span>
<span id="L253"><span class="lineNum">     253</span>                 :             :   {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6},</span>
<span id="L254"><span class="lineNum">     254</span>                 :             :   {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6},</span>
<span id="L255"><span class="lineNum">     255</span>                 :             :   {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6},</span>
<span id="L256"><span class="lineNum">     256</span>                 :             :   {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6},</span>
<span id="L257"><span class="lineNum">     257</span>                 :             :   {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6},</span>
<span id="L258"><span class="lineNum">     258</span>                 :             :   {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6}, {15, 6},</span>
<span id="L259"><span class="lineNum">     259</span>                 :             :   {15, 6}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7},</span>
<span id="L260"><span class="lineNum">     260</span>                 :             :   {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7},</span>
<span id="L261"><span class="lineNum">     261</span>                 :             :   {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7},</span>
<span id="L262"><span class="lineNum">     262</span>                 :             :   {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7},</span>
<span id="L263"><span class="lineNum">     263</span>                 :             :   {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7},</span>
<span id="L264"><span class="lineNum">     264</span>                 :             :   {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7},</span>
<span id="L265"><span class="lineNum">     265</span>                 :             :   {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7},</span>
<span id="L266"><span class="lineNum">     266</span>                 :             :   {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7},</span>
<span id="L267"><span class="lineNum">     267</span>                 :             :   {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7},</span>
<span id="L268"><span class="lineNum">     268</span>                 :             :   {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7},</span>
<span id="L269"><span class="lineNum">     269</span>                 :             :   {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7},</span>
<span id="L270"><span class="lineNum">     270</span>                 :             :   {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7},</span>
<span id="L271"><span class="lineNum">     271</span>                 :             :   {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7},</span>
<span id="L272"><span class="lineNum">     272</span>                 :             :   {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7},</span>
<span id="L273"><span class="lineNum">     273</span>                 :             :   {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7},</span>
<span id="L274"><span class="lineNum">     274</span>                 :             :   {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7}, {16, 7},</span>
<span id="L275"><span class="lineNum">     275</span>                 :             :   {16, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7},</span>
<span id="L276"><span class="lineNum">     276</span>                 :             :   {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7},</span>
<span id="L277"><span class="lineNum">     277</span>                 :             :   {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7},</span>
<span id="L278"><span class="lineNum">     278</span>                 :             :   {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7},</span>
<span id="L279"><span class="lineNum">     279</span>                 :             :   {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7},</span>
<span id="L280"><span class="lineNum">     280</span>                 :             :   {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7},</span>
<span id="L281"><span class="lineNum">     281</span>                 :             :   {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7},</span>
<span id="L282"><span class="lineNum">     282</span>                 :             :   {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7},</span>
<span id="L283"><span class="lineNum">     283</span>                 :             :   {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7},</span>
<span id="L284"><span class="lineNum">     284</span>                 :             :   {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7},</span>
<span id="L285"><span class="lineNum">     285</span>                 :             :   {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7},</span>
<span id="L286"><span class="lineNum">     286</span>                 :             :   {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7},</span>
<span id="L287"><span class="lineNum">     287</span>                 :             :   {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7},</span>
<span id="L288"><span class="lineNum">     288</span>                 :             :   {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7},</span>
<span id="L289"><span class="lineNum">     289</span>                 :             :   {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7},</span>
<span id="L290"><span class="lineNum">     290</span>                 :             :   {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7}, {17, 7},</span>
<span id="L291"><span class="lineNum">     291</span>                 :             : };</span>
<span id="L292"><span class="lineNum">     292</span>                 :             : </span>
<span id="L293"><span class="lineNum">     293</span>                 :             : const uint8_t kPrefixEncodeExtraBitsValue[PREFIX_LOOKUP_IDX_MAX] = {</span>
<span id="L294"><span class="lineNum">     294</span>                 :             :    0,  0,  0,  0,  0,  0,  1,  0,  1,  0,  1,  2,  3,  0,  1,  2,  3,</span>
<span id="L295"><span class="lineNum">     295</span>                 :             :    0,  1,  2,  3,  4,  5,  6,  7,  0,  1,  2,  3,  4,  5,  6,  7,</span>
<span id="L296"><span class="lineNum">     296</span>                 :             :    0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,</span>
<span id="L297"><span class="lineNum">     297</span>                 :             :    0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,</span>
<span id="L298"><span class="lineNum">     298</span>                 :             :    0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,</span>
<span id="L299"><span class="lineNum">     299</span>                 :             :   16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31,</span>
<span id="L300"><span class="lineNum">     300</span>                 :             :    0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,</span>
<span id="L301"><span class="lineNum">     301</span>                 :             :   16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31,</span>
<span id="L302"><span class="lineNum">     302</span>                 :             :    0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,</span>
<span id="L303"><span class="lineNum">     303</span>                 :             :   16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31,</span>
<span id="L304"><span class="lineNum">     304</span>                 :             :   32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,</span>
<span id="L305"><span class="lineNum">     305</span>                 :             :   48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63,</span>
<span id="L306"><span class="lineNum">     306</span>                 :             :    0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,</span>
<span id="L307"><span class="lineNum">     307</span>                 :             :   16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31,</span>
<span id="L308"><span class="lineNum">     308</span>                 :             :   32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,</span>
<span id="L309"><span class="lineNum">     309</span>                 :             :   48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63,</span>
<span id="L310"><span class="lineNum">     310</span>                 :             :    0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,</span>
<span id="L311"><span class="lineNum">     311</span>                 :             :   16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31,</span>
<span id="L312"><span class="lineNum">     312</span>                 :             :   32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,</span>
<span id="L313"><span class="lineNum">     313</span>                 :             :   48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63,</span>
<span id="L314"><span class="lineNum">     314</span>                 :             :   64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79,</span>
<span id="L315"><span class="lineNum">     315</span>                 :             :   80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95,</span>
<span id="L316"><span class="lineNum">     316</span>                 :             :   96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111,</span>
<span id="L317"><span class="lineNum">     317</span>                 :             :   112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126,</span>
<span id="L318"><span class="lineNum">     318</span>                 :             :   127,</span>
<span id="L319"><span class="lineNum">     319</span>                 :             :    0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,</span>
<span id="L320"><span class="lineNum">     320</span>                 :             :   16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31,</span>
<span id="L321"><span class="lineNum">     321</span>                 :             :   32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,</span>
<span id="L322"><span class="lineNum">     322</span>                 :             :   48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63,</span>
<span id="L323"><span class="lineNum">     323</span>                 :             :   64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79,</span>
<span id="L324"><span class="lineNum">     324</span>                 :             :   80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95,</span>
<span id="L325"><span class="lineNum">     325</span>                 :             :   96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111,</span>
<span id="L326"><span class="lineNum">     326</span>                 :             :   112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126</span>
<span id="L327"><span class="lineNum">     327</span>                 :             : };</span>
<span id="L328"><span class="lineNum">     328</span>                 :             : </span>
<span id="L329"><span class="lineNum">     329</span>                 :<span class="tlaUNC tlaBgUNC">           0 : static float FastSLog2Slow_C(uint32_t v) {</span></span>
<span id="L330"><span class="lineNum">     330</span>                 :             :   assert(v &gt;= LOG_LOOKUP_IDX_MAX);</span>
<span id="L331"><span class="lineNum">     331</span>                 :<span class="tlaUNC">           0 :   if (v &lt; APPROX_LOG_WITH_CORRECTION_MAX) {</span></span>
<span id="L332"><span class="lineNum">     332</span>                 :             : #if !defined(WEBP_HAVE_SLOW_CLZ_CTZ)</span>
<span id="L333"><span class="lineNum">     333</span>                 :             :     // use clz if available</span>
<span id="L334"><span class="lineNum">     334</span>                 :<span class="tlaUNC">           0 :     const int log_cnt = BitsLog2Floor(v) - 7;</span></span>
<span id="L335"><span class="lineNum">     335</span>                 :<span class="tlaUNC">           0 :     const uint32_t y = 1 &lt;&lt; log_cnt;</span></span>
<span id="L336"><span class="lineNum">     336</span>                 :<span class="tlaUNC">           0 :     int correction = 0;</span></span>
<span id="L337"><span class="lineNum">     337</span>                 :<span class="tlaUNC">           0 :     const float v_f = (float)v;</span></span>
<span id="L338"><span class="lineNum">     338</span>                 :<span class="tlaUNC">           0 :     const uint32_t orig_v = v;</span></span>
<span id="L339"><span class="lineNum">     339</span>                 :<span class="tlaUNC">           0 :     v &gt;&gt;= log_cnt;</span></span>
<span id="L340"><span class="lineNum">     340</span>                 :             : #else</span>
<span id="L341"><span class="lineNum">     341</span>                 :             :     int log_cnt = 0;</span>
<span id="L342"><span class="lineNum">     342</span>                 :             :     uint32_t y = 1;</span>
<span id="L343"><span class="lineNum">     343</span>                 :             :     int correction = 0;</span>
<span id="L344"><span class="lineNum">     344</span>                 :             :     const float v_f = (float)v;</span>
<span id="L345"><span class="lineNum">     345</span>                 :             :     const uint32_t orig_v = v;</span>
<span id="L346"><span class="lineNum">     346</span>                 :             :     do {</span>
<span id="L347"><span class="lineNum">     347</span>                 :             :       ++log_cnt;</span>
<span id="L348"><span class="lineNum">     348</span>                 :             :       v = v &gt;&gt; 1;</span>
<span id="L349"><span class="lineNum">     349</span>                 :             :       y = y &lt;&lt; 1;</span>
<span id="L350"><span class="lineNum">     350</span>                 :             :     } while (v &gt;= LOG_LOOKUP_IDX_MAX);</span>
<span id="L351"><span class="lineNum">     351</span>                 :             : #endif</span>
<span id="L352"><span class="lineNum">     352</span>                 :             :     // vf = (2^log_cnt) * Xf; where y = 2^log_cnt and Xf &lt; 256</span>
<span id="L353"><span class="lineNum">     353</span>                 :             :     // Xf = floor(Xf) * (1 + (v % y) / v)</span>
<span id="L354"><span class="lineNum">     354</span>                 :             :     // log2(Xf) = log2(floor(Xf)) + log2(1 + (v % y) / v)</span>
<span id="L355"><span class="lineNum">     355</span>                 :             :     // The correction factor: log(1 + d) ~ d; for very small d values, so</span>
<span id="L356"><span class="lineNum">     356</span>                 :             :     // log2(1 + (v % y) / v) ~ LOG_2_RECIPROCAL * (v % y)/v</span>
<span id="L357"><span class="lineNum">     357</span>                 :             :     // LOG_2_RECIPROCAL ~ 23/16</span>
<span id="L358"><span class="lineNum">     358</span>                 :<span class="tlaUNC">           0 :     correction = (23 * (orig_v &amp; (y - 1))) &gt;&gt; 4;</span></span>
<span id="L359"><span class="lineNum">     359</span>                 :<span class="tlaUNC">           0 :     return v_f * (kLog2Table[v] + log_cnt) + correction;</span></span>
<span id="L360"><span class="lineNum">     360</span>                 :             :   } else {</span>
<span id="L361"><span class="lineNum">     361</span>                 :<span class="tlaUNC">           0 :     return (float)(LOG_2_RECIPROCAL * v * log((double)v));</span></span>
<span id="L362"><span class="lineNum">     362</span>                 :             :   }</span>
<span id="L363"><span class="lineNum">     363</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L364"><span class="lineNum">     364</span>                 :             : </span>
<span id="L365"><span class="lineNum">     365</span>                 :<span class="tlaUNC">           0 : static float FastLog2Slow_C(uint32_t v) {</span></span>
<span id="L366"><span class="lineNum">     366</span>                 :             :   assert(v &gt;= LOG_LOOKUP_IDX_MAX);</span>
<span id="L367"><span class="lineNum">     367</span>                 :<span class="tlaUNC">           0 :   if (v &lt; APPROX_LOG_WITH_CORRECTION_MAX) {</span></span>
<span id="L368"><span class="lineNum">     368</span>                 :             : #if !defined(WEBP_HAVE_SLOW_CLZ_CTZ)</span>
<span id="L369"><span class="lineNum">     369</span>                 :             :     // use clz if available</span>
<span id="L370"><span class="lineNum">     370</span>                 :<span class="tlaUNC">           0 :     const int log_cnt = BitsLog2Floor(v) - 7;</span></span>
<span id="L371"><span class="lineNum">     371</span>                 :<span class="tlaUNC">           0 :     const uint32_t y = 1 &lt;&lt; log_cnt;</span></span>
<span id="L372"><span class="lineNum">     372</span>                 :<span class="tlaUNC">           0 :     const uint32_t orig_v = v;</span></span>
<span id="L373"><span class="lineNum">     373</span>                 :             :     double log_2;</span>
<span id="L374"><span class="lineNum">     374</span>                 :<span class="tlaUNC">           0 :     v &gt;&gt;= log_cnt;</span></span>
<span id="L375"><span class="lineNum">     375</span>                 :             : #else</span>
<span id="L376"><span class="lineNum">     376</span>                 :             :     int log_cnt = 0;</span>
<span id="L377"><span class="lineNum">     377</span>                 :             :     uint32_t y = 1;</span>
<span id="L378"><span class="lineNum">     378</span>                 :             :     const uint32_t orig_v = v;</span>
<span id="L379"><span class="lineNum">     379</span>                 :             :     double log_2;</span>
<span id="L380"><span class="lineNum">     380</span>                 :             :     do {</span>
<span id="L381"><span class="lineNum">     381</span>                 :             :       ++log_cnt;</span>
<span id="L382"><span class="lineNum">     382</span>                 :             :       v = v &gt;&gt; 1;</span>
<span id="L383"><span class="lineNum">     383</span>                 :             :       y = y &lt;&lt; 1;</span>
<span id="L384"><span class="lineNum">     384</span>                 :             :     } while (v &gt;= LOG_LOOKUP_IDX_MAX);</span>
<span id="L385"><span class="lineNum">     385</span>                 :             : #endif</span>
<span id="L386"><span class="lineNum">     386</span>                 :<span class="tlaUNC">           0 :     log_2 = kLog2Table[v] + log_cnt;</span></span>
<span id="L387"><span class="lineNum">     387</span>                 :<span class="tlaUNC">           0 :     if (orig_v &gt;= APPROX_LOG_MAX) {</span></span>
<span id="L388"><span class="lineNum">     388</span>                 :             :       // Since the division is still expensive, add this correction factor only</span>
<span id="L389"><span class="lineNum">     389</span>                 :             :       // for large values of 'v'.</span>
<span id="L390"><span class="lineNum">     390</span>                 :<span class="tlaUNC">           0 :       const int correction = (23 * (orig_v &amp; (y - 1))) &gt;&gt; 4;</span></span>
<span id="L391"><span class="lineNum">     391</span>                 :<span class="tlaUNC">           0 :       log_2 += (double)correction / orig_v;</span></span>
<span id="L392"><span class="lineNum">     392</span>                 :<span class="tlaUNC">           0 :     }</span></span>
<span id="L393"><span class="lineNum">     393</span>                 :<span class="tlaUNC">           0 :     return (float)log_2;</span></span>
<span id="L394"><span class="lineNum">     394</span>                 :             :   } else {</span>
<span id="L395"><span class="lineNum">     395</span>                 :<span class="tlaUNC">           0 :     return (float)(LOG_2_RECIPROCAL * log((double)v));</span></span>
<span id="L396"><span class="lineNum">     396</span>                 :             :   }</span>
<span id="L397"><span class="lineNum">     397</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L398"><span class="lineNum">     398</span>                 :             : </span>
<span id="L399"><span class="lineNum">     399</span>                 :             : //------------------------------------------------------------------------------</span>
<span id="L400"><span class="lineNum">     400</span>                 :             : // Methods to calculate Entropy (Shannon).</span>
<span id="L401"><span class="lineNum">     401</span>                 :             : </span>
<span id="L402"><span class="lineNum">     402</span>                 :             : // Compute the combined Shanon's entropy for distribution {X} and {X+Y}</span>
<span id="L403"><span class="lineNum">     403</span>                 :<span class="tlaUNC">           0 : static float CombinedShannonEntropy_C(const int X[256], const int Y[256]) {</span></span>
<span id="L404"><span class="lineNum">     404</span>                 :             :   int i;</span>
<span id="L405"><span class="lineNum">     405</span>                 :<span class="tlaUNC">           0 :   float retval = 0.f;</span></span>
<span id="L406"><span class="lineNum">     406</span>                 :<span class="tlaUNC">           0 :   int sumX = 0, sumXY = 0;</span></span>
<span id="L407"><span class="lineNum">     407</span>                 :<span class="tlaUNC">           0 :   for (i = 0; i &lt; 256; ++i) {</span></span>
<span id="L408"><span class="lineNum">     408</span>                 :<span class="tlaUNC">           0 :     const int x = X[i];</span></span>
<span id="L409"><span class="lineNum">     409</span>                 :<span class="tlaUNC">           0 :     if (x != 0) {</span></span>
<span id="L410"><span class="lineNum">     410</span>                 :<span class="tlaUNC">           0 :       const int xy = x + Y[i];</span></span>
<span id="L411"><span class="lineNum">     411</span>                 :<span class="tlaUNC">           0 :       sumX += x;</span></span>
<span id="L412"><span class="lineNum">     412</span>                 :<span class="tlaUNC">           0 :       retval -= VP8LFastSLog2(x);</span></span>
<span id="L413"><span class="lineNum">     413</span>                 :<span class="tlaUNC">           0 :       sumXY += xy;</span></span>
<span id="L414"><span class="lineNum">     414</span>                 :<span class="tlaUNC">           0 :       retval -= VP8LFastSLog2(xy);</span></span>
<span id="L415"><span class="lineNum">     415</span>                 :<span class="tlaUNC">           0 :     } else if (Y[i] != 0) {</span></span>
<span id="L416"><span class="lineNum">     416</span>                 :<span class="tlaUNC">           0 :       sumXY += Y[i];</span></span>
<span id="L417"><span class="lineNum">     417</span>                 :<span class="tlaUNC">           0 :       retval -= VP8LFastSLog2(Y[i]);</span></span>
<span id="L418"><span class="lineNum">     418</span>                 :<span class="tlaUNC">           0 :     }</span></span>
<span id="L419"><span class="lineNum">     419</span>                 :<span class="tlaUNC">           0 :   }</span></span>
<span id="L420"><span class="lineNum">     420</span>                 :<span class="tlaUNC">           0 :   retval += VP8LFastSLog2(sumX) + VP8LFastSLog2(sumXY);</span></span>
<span id="L421"><span class="lineNum">     421</span>                 :<span class="tlaUNC">           0 :   return retval;</span></span>
<span id="L422"><span class="lineNum">     422</span>                 :             : }</span>
<span id="L423"><span class="lineNum">     423</span>                 :             : </span>
<span id="L424"><span class="lineNum">     424</span>                 :<span class="tlaUNC">           0 : void VP8LBitEntropyInit(VP8LBitEntropy* const entropy) {</span></span>
<span id="L425"><span class="lineNum">     425</span>                 :<span class="tlaUNC">           0 :   entropy-&gt;entropy = 0.;</span></span>
<span id="L426"><span class="lineNum">     426</span>                 :<span class="tlaUNC">           0 :   entropy-&gt;sum = 0;</span></span>
<span id="L427"><span class="lineNum">     427</span>                 :<span class="tlaUNC">           0 :   entropy-&gt;nonzeros = 0;</span></span>
<span id="L428"><span class="lineNum">     428</span>                 :<span class="tlaUNC">           0 :   entropy-&gt;max_val = 0;</span></span>
<span id="L429"><span class="lineNum">     429</span>                 :<span class="tlaUNC">           0 :   entropy-&gt;nonzero_code = VP8L_NON_TRIVIAL_SYM;</span></span>
<span id="L430"><span class="lineNum">     430</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L431"><span class="lineNum">     431</span>                 :             : </span>
<span id="L432"><span class="lineNum">     432</span>                 :<span class="tlaUNC">           0 : void VP8LBitsEntropyUnrefined(const uint32_t* const array, int n,</span></span>
<span id="L433"><span class="lineNum">     433</span>                 :             :                               VP8LBitEntropy* const entropy) {</span>
<span id="L434"><span class="lineNum">     434</span>                 :             :   int i;</span>
<span id="L435"><span class="lineNum">     435</span>                 :             : </span>
<span id="L436"><span class="lineNum">     436</span>                 :<span class="tlaUNC">           0 :   VP8LBitEntropyInit(entropy);</span></span>
<span id="L437"><span class="lineNum">     437</span>                 :             : </span>
<span id="L438"><span class="lineNum">     438</span>                 :<span class="tlaUNC">           0 :   for (i = 0; i &lt; n; ++i) {</span></span>
<span id="L439"><span class="lineNum">     439</span>                 :<span class="tlaUNC">           0 :     if (array[i] != 0) {</span></span>
<span id="L440"><span class="lineNum">     440</span>                 :<span class="tlaUNC">           0 :       entropy-&gt;sum += array[i];</span></span>
<span id="L441"><span class="lineNum">     441</span>                 :<span class="tlaUNC">           0 :       entropy-&gt;nonzero_code = i;</span></span>
<span id="L442"><span class="lineNum">     442</span>                 :<span class="tlaUNC">           0 :       ++entropy-&gt;nonzeros;</span></span>
<span id="L443"><span class="lineNum">     443</span>                 :<span class="tlaUNC">           0 :       entropy-&gt;entropy -= VP8LFastSLog2(array[i]);</span></span>
<span id="L444"><span class="lineNum">     444</span>                 :<span class="tlaUNC">           0 :       if (entropy-&gt;max_val &lt; array[i]) {</span></span>
<span id="L445"><span class="lineNum">     445</span>                 :<span class="tlaUNC">           0 :         entropy-&gt;max_val = array[i];</span></span>
<span id="L446"><span class="lineNum">     446</span>                 :<span class="tlaUNC">           0 :       }</span></span>
<span id="L447"><span class="lineNum">     447</span>                 :<span class="tlaUNC">           0 :     }</span></span>
<span id="L448"><span class="lineNum">     448</span>                 :<span class="tlaUNC">           0 :   }</span></span>
<span id="L449"><span class="lineNum">     449</span>                 :<span class="tlaUNC">           0 :   entropy-&gt;entropy += VP8LFastSLog2(entropy-&gt;sum);</span></span>
<span id="L450"><span class="lineNum">     450</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L451"><span class="lineNum">     451</span>                 :             : </span>
<span id="L452"><span class="lineNum">     452</span>                 :<span class="tlaUNC">           0 : static WEBP_INLINE void GetEntropyUnrefinedHelper(</span></span>
<span id="L453"><span class="lineNum">     453</span>                 :             :     uint32_t val, int i, uint32_t* const val_prev, int* const i_prev,</span>
<span id="L454"><span class="lineNum">     454</span>                 :             :     VP8LBitEntropy* const bit_entropy, VP8LStreaks* const stats) {</span>
<span id="L455"><span class="lineNum">     455</span>                 :<span class="tlaUNC">           0 :   const int streak = i - *i_prev;</span></span>
<span id="L456"><span class="lineNum">     456</span>                 :             : </span>
<span id="L457"><span class="lineNum">     457</span>                 :             :   // Gather info for the bit entropy.</span>
<span id="L458"><span class="lineNum">     458</span>                 :<span class="tlaUNC">           0 :   if (*val_prev != 0) {</span></span>
<span id="L459"><span class="lineNum">     459</span>                 :<span class="tlaUNC">           0 :     bit_entropy-&gt;sum += (*val_prev) * streak;</span></span>
<span id="L460"><span class="lineNum">     460</span>                 :<span class="tlaUNC">           0 :     bit_entropy-&gt;nonzeros += streak;</span></span>
<span id="L461"><span class="lineNum">     461</span>                 :<span class="tlaUNC">           0 :     bit_entropy-&gt;nonzero_code = *i_prev;</span></span>
<span id="L462"><span class="lineNum">     462</span>                 :<span class="tlaUNC">           0 :     bit_entropy-&gt;entropy -= VP8LFastSLog2(*val_prev) * streak;</span></span>
<span id="L463"><span class="lineNum">     463</span>                 :<span class="tlaUNC">           0 :     if (bit_entropy-&gt;max_val &lt; *val_prev) {</span></span>
<span id="L464"><span class="lineNum">     464</span>                 :<span class="tlaUNC">           0 :       bit_entropy-&gt;max_val = *val_prev;</span></span>
<span id="L465"><span class="lineNum">     465</span>                 :<span class="tlaUNC">           0 :     }</span></span>
<span id="L466"><span class="lineNum">     466</span>                 :<span class="tlaUNC">           0 :   }</span></span>
<span id="L467"><span class="lineNum">     467</span>                 :             : </span>
<span id="L468"><span class="lineNum">     468</span>                 :             :   // Gather info for the Huffman cost.</span>
<span id="L469"><span class="lineNum">     469</span>                 :<span class="tlaUNC">           0 :   stats-&gt;counts[*val_prev != 0] += (streak &gt; 3);</span></span>
<span id="L470"><span class="lineNum">     470</span>                 :<span class="tlaUNC">           0 :   stats-&gt;streaks[*val_prev != 0][(streak &gt; 3)] += streak;</span></span>
<span id="L471"><span class="lineNum">     471</span>                 :             : </span>
<span id="L472"><span class="lineNum">     472</span>                 :<span class="tlaUNC">           0 :   *val_prev = val;</span></span>
<span id="L473"><span class="lineNum">     473</span>                 :<span class="tlaUNC">           0 :   *i_prev = i;</span></span>
<span id="L474"><span class="lineNum">     474</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L475"><span class="lineNum">     475</span>                 :             : </span>
<span id="L476"><span class="lineNum">     476</span>                 :<span class="tlaUNC">           0 : static void GetEntropyUnrefined_C(const uint32_t X[], int length,</span></span>
<span id="L477"><span class="lineNum">     477</span>                 :             :                                   VP8LBitEntropy* const bit_entropy,</span>
<span id="L478"><span class="lineNum">     478</span>                 :             :                                   VP8LStreaks* const stats) {</span>
<span id="L479"><span class="lineNum">     479</span>                 :             :   int i;</span>
<span id="L480"><span class="lineNum">     480</span>                 :<span class="tlaUNC">           0 :   int i_prev = 0;</span></span>
<span id="L481"><span class="lineNum">     481</span>                 :<span class="tlaUNC">           0 :   uint32_t x_prev = X[0];</span></span>
<span id="L482"><span class="lineNum">     482</span>                 :             : </span>
<span id="L483"><span class="lineNum">     483</span>                 :<span class="tlaUNC">           0 :   memset(stats, 0, sizeof(*stats));</span></span>
<span id="L484"><span class="lineNum">     484</span>                 :<span class="tlaUNC">           0 :   VP8LBitEntropyInit(bit_entropy);</span></span>
<span id="L485"><span class="lineNum">     485</span>                 :             : </span>
<span id="L486"><span class="lineNum">     486</span>                 :<span class="tlaUNC">           0 :   for (i = 1; i &lt; length; ++i) {</span></span>
<span id="L487"><span class="lineNum">     487</span>                 :<span class="tlaUNC">           0 :     const uint32_t x = X[i];</span></span>
<span id="L488"><span class="lineNum">     488</span>                 :<span class="tlaUNC">           0 :     if (x != x_prev) {</span></span>
<span id="L489"><span class="lineNum">     489</span>                 :<span class="tlaUNC">           0 :       GetEntropyUnrefinedHelper(x, i, &amp;x_prev, &amp;i_prev, bit_entropy, stats);</span></span>
<span id="L490"><span class="lineNum">     490</span>                 :<span class="tlaUNC">           0 :     }</span></span>
<span id="L491"><span class="lineNum">     491</span>                 :<span class="tlaUNC">           0 :   }</span></span>
<span id="L492"><span class="lineNum">     492</span>                 :<span class="tlaUNC">           0 :   GetEntropyUnrefinedHelper(0, i, &amp;x_prev, &amp;i_prev, bit_entropy, stats);</span></span>
<span id="L493"><span class="lineNum">     493</span>                 :             : </span>
<span id="L494"><span class="lineNum">     494</span>                 :<span class="tlaUNC">           0 :   bit_entropy-&gt;entropy += VP8LFastSLog2(bit_entropy-&gt;sum);</span></span>
<span id="L495"><span class="lineNum">     495</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L496"><span class="lineNum">     496</span>                 :             : </span>
<span id="L497"><span class="lineNum">     497</span>                 :<span class="tlaUNC">           0 : static void GetCombinedEntropyUnrefined_C(const uint32_t X[],</span></span>
<span id="L498"><span class="lineNum">     498</span>                 :             :                                           const uint32_t Y[],</span>
<span id="L499"><span class="lineNum">     499</span>                 :             :                                           int length,</span>
<span id="L500"><span class="lineNum">     500</span>                 :             :                                           VP8LBitEntropy* const bit_entropy,</span>
<span id="L501"><span class="lineNum">     501</span>                 :             :                                           VP8LStreaks* const stats) {</span>
<span id="L502"><span class="lineNum">     502</span>                 :<span class="tlaUNC">           0 :   int i = 1;</span></span>
<span id="L503"><span class="lineNum">     503</span>                 :<span class="tlaUNC">           0 :   int i_prev = 0;</span></span>
<span id="L504"><span class="lineNum">     504</span>                 :<span class="tlaUNC">           0 :   uint32_t xy_prev = X[0] + Y[0];</span></span>
<span id="L505"><span class="lineNum">     505</span>                 :             : </span>
<span id="L506"><span class="lineNum">     506</span>                 :<span class="tlaUNC">           0 :   memset(stats, 0, sizeof(*stats));</span></span>
<span id="L507"><span class="lineNum">     507</span>                 :<span class="tlaUNC">           0 :   VP8LBitEntropyInit(bit_entropy);</span></span>
<span id="L508"><span class="lineNum">     508</span>                 :             : </span>
<span id="L509"><span class="lineNum">     509</span>                 :<span class="tlaUNC">           0 :   for (i = 1; i &lt; length; ++i) {</span></span>
<span id="L510"><span class="lineNum">     510</span>                 :<span class="tlaUNC">           0 :     const uint32_t xy = X[i] + Y[i];</span></span>
<span id="L511"><span class="lineNum">     511</span>                 :<span class="tlaUNC">           0 :     if (xy != xy_prev) {</span></span>
<span id="L512"><span class="lineNum">     512</span>                 :<span class="tlaUNC">           0 :       GetEntropyUnrefinedHelper(xy, i, &amp;xy_prev, &amp;i_prev, bit_entropy, stats);</span></span>
<span id="L513"><span class="lineNum">     513</span>                 :<span class="tlaUNC">           0 :     }</span></span>
<span id="L514"><span class="lineNum">     514</span>                 :<span class="tlaUNC">           0 :   }</span></span>
<span id="L515"><span class="lineNum">     515</span>                 :<span class="tlaUNC">           0 :   GetEntropyUnrefinedHelper(0, i, &amp;xy_prev, &amp;i_prev, bit_entropy, stats);</span></span>
<span id="L516"><span class="lineNum">     516</span>                 :             : </span>
<span id="L517"><span class="lineNum">     517</span>                 :<span class="tlaUNC">           0 :   bit_entropy-&gt;entropy += VP8LFastSLog2(bit_entropy-&gt;sum);</span></span>
<span id="L518"><span class="lineNum">     518</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L519"><span class="lineNum">     519</span>                 :             : </span>
<span id="L520"><span class="lineNum">     520</span>                 :             : //------------------------------------------------------------------------------</span>
<span id="L521"><span class="lineNum">     521</span>                 :             : </span>
<span id="L522"><span class="lineNum">     522</span>                 :<span class="tlaUNC">           0 : void VP8LSubtractGreenFromBlueAndRed_C(uint32_t* argb_data, int num_pixels) {</span></span>
<span id="L523"><span class="lineNum">     523</span>                 :             :   int i;</span>
<span id="L524"><span class="lineNum">     524</span>                 :<span class="tlaUNC">           0 :   for (i = 0; i &lt; num_pixels; ++i) {</span></span>
<span id="L525"><span class="lineNum">     525</span>                 :<span class="tlaUNC">           0 :     const int argb = (int)argb_data[i];</span></span>
<span id="L526"><span class="lineNum">     526</span>                 :<span class="tlaUNC">           0 :     const int green = (argb &gt;&gt; 8) &amp; 0xff;</span></span>
<span id="L527"><span class="lineNum">     527</span>                 :<span class="tlaUNC">           0 :     const uint32_t new_r = (((argb &gt;&gt; 16) &amp; 0xff) - green) &amp; 0xff;</span></span>
<span id="L528"><span class="lineNum">     528</span>                 :<span class="tlaUNC">           0 :     const uint32_t new_b = (((argb &gt;&gt;  0) &amp; 0xff) - green) &amp; 0xff;</span></span>
<span id="L529"><span class="lineNum">     529</span>                 :<span class="tlaUNC">           0 :     argb_data[i] = ((uint32_t)argb &amp; 0xff00ff00u) | (new_r &lt;&lt; 16) | new_b;</span></span>
<span id="L530"><span class="lineNum">     530</span>                 :<span class="tlaUNC">           0 :   }</span></span>
<span id="L531"><span class="lineNum">     531</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L532"><span class="lineNum">     532</span>                 :             : </span>
<span id="L533"><span class="lineNum">     533</span>                 :<span class="tlaUNC">           0 : static WEBP_INLINE int ColorTransformDelta(int8_t color_pred, int8_t color) {</span></span>
<span id="L534"><span class="lineNum">     534</span>                 :<span class="tlaUNC">           0 :   return ((int)color_pred * color) &gt;&gt; 5;</span></span>
<span id="L535"><span class="lineNum">     535</span>                 :             : }</span>
<span id="L536"><span class="lineNum">     536</span>                 :             : </span>
<span id="L537"><span class="lineNum">     537</span>                 :<span class="tlaUNC">           0 : static WEBP_INLINE int8_t U32ToS8(uint32_t v) {</span></span>
<span id="L538"><span class="lineNum">     538</span>                 :<span class="tlaUNC">           0 :   return (int8_t)(v &amp; 0xff);</span></span>
<span id="L539"><span class="lineNum">     539</span>                 :             : }</span>
<span id="L540"><span class="lineNum">     540</span>                 :             : </span>
<span id="L541"><span class="lineNum">     541</span>                 :<span class="tlaUNC">           0 : void VP8LTransformColor_C(const VP8LMultipliers* const m, uint32_t* data,</span></span>
<span id="L542"><span class="lineNum">     542</span>                 :             :                           int num_pixels) {</span>
<span id="L543"><span class="lineNum">     543</span>                 :             :   int i;</span>
<span id="L544"><span class="lineNum">     544</span>                 :<span class="tlaUNC">           0 :   for (i = 0; i &lt; num_pixels; ++i) {</span></span>
<span id="L545"><span class="lineNum">     545</span>                 :<span class="tlaUNC">           0 :     const uint32_t argb = data[i];</span></span>
<span id="L546"><span class="lineNum">     546</span>                 :<span class="tlaUNC">           0 :     const int8_t green = U32ToS8(argb &gt;&gt;  8);</span></span>
<span id="L547"><span class="lineNum">     547</span>                 :<span class="tlaUNC">           0 :     const int8_t red   = U32ToS8(argb &gt;&gt; 16);</span></span>
<span id="L548"><span class="lineNum">     548</span>                 :<span class="tlaUNC">           0 :     int new_red = red &amp; 0xff;</span></span>
<span id="L549"><span class="lineNum">     549</span>                 :<span class="tlaUNC">           0 :     int new_blue = argb &amp; 0xff;</span></span>
<span id="L550"><span class="lineNum">     550</span>                 :<span class="tlaUNC">           0 :     new_red -= ColorTransformDelta((int8_t)m-&gt;green_to_red_, green);</span></span>
<span id="L551"><span class="lineNum">     551</span>                 :<span class="tlaUNC">           0 :     new_red &amp;= 0xff;</span></span>
<span id="L552"><span class="lineNum">     552</span>                 :<span class="tlaUNC">           0 :     new_blue -= ColorTransformDelta((int8_t)m-&gt;green_to_blue_, green);</span></span>
<span id="L553"><span class="lineNum">     553</span>                 :<span class="tlaUNC">           0 :     new_blue -= ColorTransformDelta((int8_t)m-&gt;red_to_blue_, red);</span></span>
<span id="L554"><span class="lineNum">     554</span>                 :<span class="tlaUNC">           0 :     new_blue &amp;= 0xff;</span></span>
<span id="L555"><span class="lineNum">     555</span>                 :<span class="tlaUNC">           0 :     data[i] = (argb &amp; 0xff00ff00u) | (new_red &lt;&lt; 16) | (new_blue);</span></span>
<span id="L556"><span class="lineNum">     556</span>                 :<span class="tlaUNC">           0 :   }</span></span>
<span id="L557"><span class="lineNum">     557</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L558"><span class="lineNum">     558</span>                 :             : </span>
<span id="L559"><span class="lineNum">     559</span>                 :<span class="tlaUNC">           0 : static WEBP_INLINE uint8_t TransformColorRed(uint8_t green_to_red,</span></span>
<span id="L560"><span class="lineNum">     560</span>                 :             :                                              uint32_t argb) {</span>
<span id="L561"><span class="lineNum">     561</span>                 :<span class="tlaUNC">           0 :   const int8_t green = U32ToS8(argb &gt;&gt; 8);</span></span>
<span id="L562"><span class="lineNum">     562</span>                 :<span class="tlaUNC">           0 :   int new_red = argb &gt;&gt; 16;</span></span>
<span id="L563"><span class="lineNum">     563</span>                 :<span class="tlaUNC">           0 :   new_red -= ColorTransformDelta((int8_t)green_to_red, green);</span></span>
<span id="L564"><span class="lineNum">     564</span>                 :<span class="tlaUNC">           0 :   return (new_red &amp; 0xff);</span></span>
<span id="L565"><span class="lineNum">     565</span>                 :             : }</span>
<span id="L566"><span class="lineNum">     566</span>                 :             : </span>
<span id="L567"><span class="lineNum">     567</span>                 :<span class="tlaUNC">           0 : static WEBP_INLINE uint8_t TransformColorBlue(uint8_t green_to_blue,</span></span>
<span id="L568"><span class="lineNum">     568</span>                 :             :                                               uint8_t red_to_blue,</span>
<span id="L569"><span class="lineNum">     569</span>                 :             :                                               uint32_t argb) {</span>
<span id="L570"><span class="lineNum">     570</span>                 :<span class="tlaUNC">           0 :   const int8_t green = U32ToS8(argb &gt;&gt;  8);</span></span>
<span id="L571"><span class="lineNum">     571</span>                 :<span class="tlaUNC">           0 :   const int8_t red   = U32ToS8(argb &gt;&gt; 16);</span></span>
<span id="L572"><span class="lineNum">     572</span>                 :<span class="tlaUNC">           0 :   int new_blue = argb &amp; 0xff;</span></span>
<span id="L573"><span class="lineNum">     573</span>                 :<span class="tlaUNC">           0 :   new_blue -= ColorTransformDelta((int8_t)green_to_blue, green);</span></span>
<span id="L574"><span class="lineNum">     574</span>                 :<span class="tlaUNC">           0 :   new_blue -= ColorTransformDelta((int8_t)red_to_blue, red);</span></span>
<span id="L575"><span class="lineNum">     575</span>                 :<span class="tlaUNC">           0 :   return (new_blue &amp; 0xff);</span></span>
<span id="L576"><span class="lineNum">     576</span>                 :             : }</span>
<span id="L577"><span class="lineNum">     577</span>                 :             : </span>
<span id="L578"><span class="lineNum">     578</span>                 :<span class="tlaUNC">           0 : void VP8LCollectColorRedTransforms_C(const uint32_t* argb, int stride,</span></span>
<span id="L579"><span class="lineNum">     579</span>                 :             :                                      int tile_width, int tile_height,</span>
<span id="L580"><span class="lineNum">     580</span>                 :             :                                      int green_to_red, int histo[]) {</span>
<span id="L581"><span class="lineNum">     581</span>                 :<span class="tlaUNC">           0 :   while (tile_height-- &gt; 0) {</span></span>
<span id="L582"><span class="lineNum">     582</span>                 :             :     int x;</span>
<span id="L583"><span class="lineNum">     583</span>                 :<span class="tlaUNC">           0 :     for (x = 0; x &lt; tile_width; ++x) {</span></span>
<span id="L584"><span class="lineNum">     584</span>                 :<span class="tlaUNC">           0 :       ++histo[TransformColorRed((uint8_t)green_to_red, argb[x])];</span></span>
<span id="L585"><span class="lineNum">     585</span>                 :<span class="tlaUNC">           0 :     }</span></span>
<span id="L586"><span class="lineNum">     586</span>                 :<span class="tlaUNC">           0 :     argb += stride;</span></span>
<span id="L587"><span class="lineNum">     587</span>                 :             :   }</span>
<span id="L588"><span class="lineNum">     588</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L589"><span class="lineNum">     589</span>                 :             : </span>
<span id="L590"><span class="lineNum">     590</span>                 :<span class="tlaUNC">           0 : void VP8LCollectColorBlueTransforms_C(const uint32_t* argb, int stride,</span></span>
<span id="L591"><span class="lineNum">     591</span>                 :             :                                       int tile_width, int tile_height,</span>
<span id="L592"><span class="lineNum">     592</span>                 :             :                                       int green_to_blue, int red_to_blue,</span>
<span id="L593"><span class="lineNum">     593</span>                 :             :                                       int histo[]) {</span>
<span id="L594"><span class="lineNum">     594</span>                 :<span class="tlaUNC">           0 :   while (tile_height-- &gt; 0) {</span></span>
<span id="L595"><span class="lineNum">     595</span>                 :             :     int x;</span>
<span id="L596"><span class="lineNum">     596</span>                 :<span class="tlaUNC">           0 :     for (x = 0; x &lt; tile_width; ++x) {</span></span>
<span id="L597"><span class="lineNum">     597</span>                 :<span class="tlaUNC">           0 :       ++histo[TransformColorBlue((uint8_t)green_to_blue, (uint8_t)red_to_blue,</span></span>
<span id="L598"><span class="lineNum">     598</span>                 :<span class="tlaUNC">           0 :                                  argb[x])];</span></span>
<span id="L599"><span class="lineNum">     599</span>                 :<span class="tlaUNC">           0 :     }</span></span>
<span id="L600"><span class="lineNum">     600</span>                 :<span class="tlaUNC">           0 :     argb += stride;</span></span>
<span id="L601"><span class="lineNum">     601</span>                 :             :   }</span>
<span id="L602"><span class="lineNum">     602</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L603"><span class="lineNum">     603</span>                 :             : </span>
<span id="L604"><span class="lineNum">     604</span>                 :             : //------------------------------------------------------------------------------</span>
<span id="L605"><span class="lineNum">     605</span>                 :             : </span>
<span id="L606"><span class="lineNum">     606</span>                 :<span class="tlaUNC">           0 : static int VectorMismatch_C(const uint32_t* const array1,</span></span>
<span id="L607"><span class="lineNum">     607</span>                 :             :                             const uint32_t* const array2, int length) {</span>
<span id="L608"><span class="lineNum">     608</span>                 :<span class="tlaUNC">           0 :   int match_len = 0;</span></span>
<span id="L609"><span class="lineNum">     609</span>                 :             : </span>
<span id="L610"><span class="lineNum">     610</span>                 :<span class="tlaUNC">           0 :   while (match_len &lt; length &amp;&amp; array1[match_len] == array2[match_len]) {</span></span>
<span id="L611"><span class="lineNum">     611</span>                 :<span class="tlaUNC">           0 :     ++match_len;</span></span>
<span id="L612"><span class="lineNum">     612</span>                 :             :   }</span>
<span id="L613"><span class="lineNum">     613</span>                 :<span class="tlaUNC">           0 :   return match_len;</span></span>
<span id="L614"><span class="lineNum">     614</span>                 :             : }</span>
<span id="L615"><span class="lineNum">     615</span>                 :             : </span>
<span id="L616"><span class="lineNum">     616</span>                 :             : // Bundles multiple (1, 2, 4 or 8) pixels into a single pixel.</span>
<span id="L617"><span class="lineNum">     617</span>                 :<span class="tlaUNC">           0 : void VP8LBundleColorMap_C(const uint8_t* const row, int width, int xbits,</span></span>
<span id="L618"><span class="lineNum">     618</span>                 :             :                           uint32_t* dst) {</span>
<span id="L619"><span class="lineNum">     619</span>                 :             :   int x;</span>
<span id="L620"><span class="lineNum">     620</span>                 :<span class="tlaUNC">           0 :   if (xbits &gt; 0) {</span></span>
<span id="L621"><span class="lineNum">     621</span>                 :<span class="tlaUNC">           0 :     const int bit_depth = 1 &lt;&lt; (3 - xbits);</span></span>
<span id="L622"><span class="lineNum">     622</span>                 :<span class="tlaUNC">           0 :     const int mask = (1 &lt;&lt; xbits) - 1;</span></span>
<span id="L623"><span class="lineNum">     623</span>                 :<span class="tlaUNC">           0 :     uint32_t code = 0xff000000;</span></span>
<span id="L624"><span class="lineNum">     624</span>                 :<span class="tlaUNC">           0 :     for (x = 0; x &lt; width; ++x) {</span></span>
<span id="L625"><span class="lineNum">     625</span>                 :<span class="tlaUNC">           0 :       const int xsub = x &amp; mask;</span></span>
<span id="L626"><span class="lineNum">     626</span>                 :<span class="tlaUNC">           0 :       if (xsub == 0) {</span></span>
<span id="L627"><span class="lineNum">     627</span>                 :<span class="tlaUNC">           0 :         code = 0xff000000;</span></span>
<span id="L628"><span class="lineNum">     628</span>                 :<span class="tlaUNC">           0 :       }</span></span>
<span id="L629"><span class="lineNum">     629</span>                 :<span class="tlaUNC">           0 :       code |= row[x] &lt;&lt; (8 + bit_depth * xsub);</span></span>
<span id="L630"><span class="lineNum">     630</span>                 :<span class="tlaUNC">           0 :       dst[x &gt;&gt; xbits] = code;</span></span>
<span id="L631"><span class="lineNum">     631</span>                 :<span class="tlaUNC">           0 :     }</span></span>
<span id="L632"><span class="lineNum">     632</span>                 :<span class="tlaUNC">           0 :   } else {</span></span>
<span id="L633"><span class="lineNum">     633</span>                 :<span class="tlaUNC">           0 :     for (x = 0; x &lt; width; ++x) dst[x] = 0xff000000 | (row[x] &lt;&lt; 8);</span></span>
<span id="L634"><span class="lineNum">     634</span>                 :             :   }</span>
<span id="L635"><span class="lineNum">     635</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L636"><span class="lineNum">     636</span>                 :             : </span>
<span id="L637"><span class="lineNum">     637</span>                 :             : //------------------------------------------------------------------------------</span>
<span id="L638"><span class="lineNum">     638</span>                 :             : </span>
<span id="L639"><span class="lineNum">     639</span>                 :<span class="tlaUNC">           0 : static float ExtraCost_C(const uint32_t* population, int length) {</span></span>
<span id="L640"><span class="lineNum">     640</span>                 :             :   int i;</span>
<span id="L641"><span class="lineNum">     641</span>                 :<span class="tlaUNC">           0 :   float cost = 0.f;</span></span>
<span id="L642"><span class="lineNum">     642</span>                 :<span class="tlaUNC">           0 :   for (i = 2; i &lt; length - 2; ++i) cost += (i &gt;&gt; 1) * population[i + 2];</span></span>
<span id="L643"><span class="lineNum">     643</span>                 :<span class="tlaUNC">           0 :   return cost;</span></span>
<span id="L644"><span class="lineNum">     644</span>                 :             : }</span>
<span id="L645"><span class="lineNum">     645</span>                 :             : </span>
<span id="L646"><span class="lineNum">     646</span>                 :<span class="tlaUNC">           0 : static float ExtraCostCombined_C(const uint32_t* X, const uint32_t* Y,</span></span>
<span id="L647"><span class="lineNum">     647</span>                 :             :                                   int length) {</span>
<span id="L648"><span class="lineNum">     648</span>                 :             :   int i;</span>
<span id="L649"><span class="lineNum">     649</span>                 :<span class="tlaUNC">           0 :   float cost = 0.f;</span></span>
<span id="L650"><span class="lineNum">     650</span>                 :<span class="tlaUNC">           0 :   for (i = 2; i &lt; length - 2; ++i) {</span></span>
<span id="L651"><span class="lineNum">     651</span>                 :<span class="tlaUNC">           0 :     const int xy = X[i + 2] + Y[i + 2];</span></span>
<span id="L652"><span class="lineNum">     652</span>                 :<span class="tlaUNC">           0 :     cost += (i &gt;&gt; 1) * xy;</span></span>
<span id="L653"><span class="lineNum">     653</span>                 :<span class="tlaUNC">           0 :   }</span></span>
<span id="L654"><span class="lineNum">     654</span>                 :<span class="tlaUNC">           0 :   return cost;</span></span>
<span id="L655"><span class="lineNum">     655</span>                 :             : }</span>
<span id="L656"><span class="lineNum">     656</span>                 :             : </span>
<span id="L657"><span class="lineNum">     657</span>                 :             : //------------------------------------------------------------------------------</span>
<span id="L658"><span class="lineNum">     658</span>                 :             : </span>
<span id="L659"><span class="lineNum">     659</span>                 :<span class="tlaUNC">           0 : static void AddVector_C(const uint32_t* a, const uint32_t* b, uint32_t* out,</span></span>
<span id="L660"><span class="lineNum">     660</span>                 :             :                         int size) {</span>
<span id="L661"><span class="lineNum">     661</span>                 :             :   int i;</span>
<span id="L662"><span class="lineNum">     662</span>                 :<span class="tlaUNC">           0 :   for (i = 0; i &lt; size; ++i) out[i] = a[i] + b[i];</span></span>
<span id="L663"><span class="lineNum">     663</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L664"><span class="lineNum">     664</span>                 :             : </span>
<span id="L665"><span class="lineNum">     665</span>                 :<span class="tlaUNC">           0 : static void AddVectorEq_C(const uint32_t* a, uint32_t* out, int size) {</span></span>
<span id="L666"><span class="lineNum">     666</span>                 :             :   int i;</span>
<span id="L667"><span class="lineNum">     667</span>                 :<span class="tlaUNC">           0 :   for (i = 0; i &lt; size; ++i) out[i] += a[i];</span></span>
<span id="L668"><span class="lineNum">     668</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L669"><span class="lineNum">     669</span>                 :             : </span>
<span id="L670"><span class="lineNum">     670</span>                 :             : #define ADD(X, ARG, LEN) do {                                                  \</span>
<span id="L671"><span class="lineNum">     671</span>                 :             :   if (a-&gt;is_used_[X]) {                                                        \</span>
<span id="L672"><span class="lineNum">     672</span>                 :             :     if (b-&gt;is_used_[X]) {                                                      \</span>
<span id="L673"><span class="lineNum">     673</span>                 :             :       VP8LAddVector(a-&gt;ARG, b-&gt;ARG, out-&gt;ARG, (LEN));                          \</span>
<span id="L674"><span class="lineNum">     674</span>                 :             :     } else {                                                                   \</span>
<span id="L675"><span class="lineNum">     675</span>                 :             :       memcpy(&amp;out-&gt;ARG[0], &amp;a-&gt;ARG[0], (LEN) * sizeof(out-&gt;ARG[0]));           \</span>
<span id="L676"><span class="lineNum">     676</span>                 :             :     }                                                                          \</span>
<span id="L677"><span class="lineNum">     677</span>                 :             :   } else if (b-&gt;is_used_[X]) {                                                 \</span>
<span id="L678"><span class="lineNum">     678</span>                 :             :     memcpy(&amp;out-&gt;ARG[0], &amp;b-&gt;ARG[0], (LEN) * sizeof(out-&gt;ARG[0]));             \</span>
<span id="L679"><span class="lineNum">     679</span>                 :             :   } else {                                                                     \</span>
<span id="L680"><span class="lineNum">     680</span>                 :             :     memset(&amp;out-&gt;ARG[0], 0, (LEN) * sizeof(out-&gt;ARG[0]));                      \</span>
<span id="L681"><span class="lineNum">     681</span>                 :             :   }                                                                            \</span>
<span id="L682"><span class="lineNum">     682</span>                 :             : } while (0)</span>
<span id="L683"><span class="lineNum">     683</span>                 :             : </span>
<span id="L684"><span class="lineNum">     684</span>                 :             : #define ADD_EQ(X, ARG, LEN) do {                                               \</span>
<span id="L685"><span class="lineNum">     685</span>                 :             :   if (a-&gt;is_used_[X]) {                                                        \</span>
<span id="L686"><span class="lineNum">     686</span>                 :             :     if (out-&gt;is_used_[X]) {                                                    \</span>
<span id="L687"><span class="lineNum">     687</span>                 :             :       VP8LAddVectorEq(a-&gt;ARG, out-&gt;ARG, (LEN));                                \</span>
<span id="L688"><span class="lineNum">     688</span>                 :             :     } else {                                                                   \</span>
<span id="L689"><span class="lineNum">     689</span>                 :             :       memcpy(&amp;out-&gt;ARG[0], &amp;a-&gt;ARG[0], (LEN) * sizeof(out-&gt;ARG[0]));           \</span>
<span id="L690"><span class="lineNum">     690</span>                 :             :     }                                                                          \</span>
<span id="L691"><span class="lineNum">     691</span>                 :             :   }                                                                            \</span>
<span id="L692"><span class="lineNum">     692</span>                 :             : } while (0)</span>
<span id="L693"><span class="lineNum">     693</span>                 :             : </span>
<span id="L694"><span class="lineNum">     694</span>                 :<span class="tlaUNC">           0 : void VP8LHistogramAdd(const VP8LHistogram* const a,</span></span>
<span id="L695"><span class="lineNum">     695</span>                 :             :                       const VP8LHistogram* const b, VP8LHistogram* const out) {</span>
<span id="L696"><span class="lineNum">     696</span>                 :             :   int i;</span>
<span id="L697"><span class="lineNum">     697</span>                 :<span class="tlaUNC">           0 :   const int literal_size = VP8LHistogramNumCodes(a-&gt;palette_code_bits_);</span></span>
<span id="L698"><span class="lineNum">     698</span>                 :             :   assert(a-&gt;palette_code_bits_ == b-&gt;palette_code_bits_);</span>
<span id="L699"><span class="lineNum">     699</span>                 :             : </span>
<span id="L700"><span class="lineNum">     700</span>                 :<span class="tlaUNC">           0 :   if (b != out) {</span></span>
<span id="L701"><span class="lineNum">     701</span>                 :<span class="tlaUNC">           0 :     ADD(0, literal_, literal_size);</span></span>
<span id="L702"><span class="lineNum">     702</span>                 :<span class="tlaUNC">           0 :     ADD(1, red_, NUM_LITERAL_CODES);</span></span>
<span id="L703"><span class="lineNum">     703</span>                 :<span class="tlaUNC">           0 :     ADD(2, blue_, NUM_LITERAL_CODES);</span></span>
<span id="L704"><span class="lineNum">     704</span>                 :<span class="tlaUNC">           0 :     ADD(3, alpha_, NUM_LITERAL_CODES);</span></span>
<span id="L705"><span class="lineNum">     705</span>                 :<span class="tlaUNC">           0 :     ADD(4, distance_, NUM_DISTANCE_CODES);</span></span>
<span id="L706"><span class="lineNum">     706</span>                 :<span class="tlaUNC">           0 :     for (i = 0; i &lt; 5; ++i) {</span></span>
<span id="L707"><span class="lineNum">     707</span>                 :<span class="tlaUNC">           0 :       out-&gt;is_used_[i] = (a-&gt;is_used_[i] | b-&gt;is_used_[i]);</span></span>
<span id="L708"><span class="lineNum">     708</span>                 :<span class="tlaUNC">           0 :     }</span></span>
<span id="L709"><span class="lineNum">     709</span>                 :<span class="tlaUNC">           0 :   } else {</span></span>
<span id="L710"><span class="lineNum">     710</span>                 :<span class="tlaUNC">           0 :     ADD_EQ(0, literal_, literal_size);</span></span>
<span id="L711"><span class="lineNum">     711</span>                 :<span class="tlaUNC">           0 :     ADD_EQ(1, red_, NUM_LITERAL_CODES);</span></span>
<span id="L712"><span class="lineNum">     712</span>                 :<span class="tlaUNC">           0 :     ADD_EQ(2, blue_, NUM_LITERAL_CODES);</span></span>
<span id="L713"><span class="lineNum">     713</span>                 :<span class="tlaUNC">           0 :     ADD_EQ(3, alpha_, NUM_LITERAL_CODES);</span></span>
<span id="L714"><span class="lineNum">     714</span>                 :<span class="tlaUNC">           0 :     ADD_EQ(4, distance_, NUM_DISTANCE_CODES);</span></span>
<span id="L715"><span class="lineNum">     715</span>                 :<span class="tlaUNC">           0 :     for (i = 0; i &lt; 5; ++i) out-&gt;is_used_[i] |= a-&gt;is_used_[i];</span></span>
<span id="L716"><span class="lineNum">     716</span>                 :             :   }</span>
<span id="L717"><span class="lineNum">     717</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L718"><span class="lineNum">     718</span>                 :             : #undef ADD</span>
<span id="L719"><span class="lineNum">     719</span>                 :             : #undef ADD_EQ</span>
<span id="L720"><span class="lineNum">     720</span>                 :             : </span>
<span id="L721"><span class="lineNum">     721</span>                 :             : //------------------------------------------------------------------------------</span>
<span id="L722"><span class="lineNum">     722</span>                 :             : // Image transforms.</span>
<span id="L723"><span class="lineNum">     723</span>                 :             : </span>
<span id="L724"><span class="lineNum">     724</span>                 :<span class="tlaUNC">           0 : static void PredictorSub0_C(const uint32_t* in, const uint32_t* upper,</span></span>
<span id="L725"><span class="lineNum">     725</span>                 :             :                             int num_pixels, uint32_t* out) {</span>
<span id="L726"><span class="lineNum">     726</span>                 :             :   int i;</span>
<span id="L727"><span class="lineNum">     727</span>                 :<span class="tlaUNC">           0 :   for (i = 0; i &lt; num_pixels; ++i) out[i] = VP8LSubPixels(in[i], ARGB_BLACK);</span></span>
<span id="L728"><span class="lineNum">     728</span>                 :<span class="tlaUNC">           0 :   (void)upper;</span></span>
<span id="L729"><span class="lineNum">     729</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L730"><span class="lineNum">     730</span>                 :             : </span>
<span id="L731"><span class="lineNum">     731</span>                 :<span class="tlaUNC">           0 : static void PredictorSub1_C(const uint32_t* in, const uint32_t* upper,</span></span>
<span id="L732"><span class="lineNum">     732</span>                 :             :                             int num_pixels, uint32_t* out) {</span>
<span id="L733"><span class="lineNum">     733</span>                 :             :   int i;</span>
<span id="L734"><span class="lineNum">     734</span>                 :<span class="tlaUNC">           0 :   for (i = 0; i &lt; num_pixels; ++i) out[i] = VP8LSubPixels(in[i], in[i - 1]);</span></span>
<span id="L735"><span class="lineNum">     735</span>                 :<span class="tlaUNC">           0 :   (void)upper;</span></span>
<span id="L736"><span class="lineNum">     736</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L737"><span class="lineNum">     737</span>                 :             : </span>
<span id="L738"><span class="lineNum">     738</span>                 :             : // It subtracts the prediction from the input pixel and stores the residual</span>
<span id="L739"><span class="lineNum">     739</span>                 :             : // in the output pixel.</span>
<span id="L740"><span class="lineNum">     740</span>                 :             : #define GENERATE_PREDICTOR_SUB(PREDICTOR_I)                                \</span>
<span id="L741"><span class="lineNum">     741</span>                 :             : static void PredictorSub##PREDICTOR_I##_C(const uint32_t* in,              \</span>
<span id="L742"><span class="lineNum">     742</span>                 :             :                                           const uint32_t* upper,           \</span>
<span id="L743"><span class="lineNum">     743</span>                 :             :                                           int num_pixels, uint32_t* out) { \</span>
<span id="L744"><span class="lineNum">     744</span>                 :             :   int x;                                                                   \</span>
<span id="L745"><span class="lineNum">     745</span>                 :             :   assert(upper != NULL);                                                   \</span>
<span id="L746"><span class="lineNum">     746</span>                 :             :   for (x = 0; x &lt; num_pixels; ++x) {                                       \</span>
<span id="L747"><span class="lineNum">     747</span>                 :             :     const uint32_t pred =                                                  \</span>
<span id="L748"><span class="lineNum">     748</span>                 :             :         VP8LPredictor##PREDICTOR_I##_C(&amp;in[x - 1], upper + x);             \</span>
<span id="L749"><span class="lineNum">     749</span>                 :             :     out[x] = VP8LSubPixels(in[x], pred);                                   \</span>
<span id="L750"><span class="lineNum">     750</span>                 :             :   }                                                                        \</span>
<span id="L751"><span class="lineNum">     751</span>                 :             : }</span>
<span id="L752"><span class="lineNum">     752</span>                 :             : </span>
<span id="L753"><span class="lineNum">     753</span>                 :<span class="tlaUNC">           0 : GENERATE_PREDICTOR_SUB(2)</span></span>
<span id="L754"><span class="lineNum">     754</span>                 :<span class="tlaUNC">           0 : GENERATE_PREDICTOR_SUB(3)</span></span>
<span id="L755"><span class="lineNum">     755</span>                 :<span class="tlaUNC">           0 : GENERATE_PREDICTOR_SUB(4)</span></span>
<span id="L756"><span class="lineNum">     756</span>                 :<span class="tlaUNC">           0 : GENERATE_PREDICTOR_SUB(5)</span></span>
<span id="L757"><span class="lineNum">     757</span>                 :<span class="tlaUNC">           0 : GENERATE_PREDICTOR_SUB(6)</span></span>
<span id="L758"><span class="lineNum">     758</span>                 :<span class="tlaUNC">           0 : GENERATE_PREDICTOR_SUB(7)</span></span>
<span id="L759"><span class="lineNum">     759</span>                 :<span class="tlaUNC">           0 : GENERATE_PREDICTOR_SUB(8)</span></span>
<span id="L760"><span class="lineNum">     760</span>                 :<span class="tlaUNC">           0 : GENERATE_PREDICTOR_SUB(9)</span></span>
<span id="L761"><span class="lineNum">     761</span>                 :<span class="tlaUNC">           0 : GENERATE_PREDICTOR_SUB(10)</span></span>
<span id="L762"><span class="lineNum">     762</span>                 :<span class="tlaUNC">           0 : GENERATE_PREDICTOR_SUB(11)</span></span>
<span id="L763"><span class="lineNum">     763</span>                 :<span class="tlaUNC">           0 : GENERATE_PREDICTOR_SUB(12)</span></span>
<span id="L764"><span class="lineNum">     764</span>                 :<span class="tlaUNC">           0 : GENERATE_PREDICTOR_SUB(13)</span></span>
<span id="L765"><span class="lineNum">     765</span>                 :             : </span>
<span id="L766"><span class="lineNum">     766</span>                 :             : //------------------------------------------------------------------------------</span>
<span id="L767"><span class="lineNum">     767</span>                 :             : </span>
<span id="L768"><span class="lineNum">     768</span>                 :             : VP8LProcessEncBlueAndRedFunc VP8LSubtractGreenFromBlueAndRed;</span>
<span id="L769"><span class="lineNum">     769</span>                 :             : </span>
<span id="L770"><span class="lineNum">     770</span>                 :             : VP8LTransformColorFunc VP8LTransformColor;</span>
<span id="L771"><span class="lineNum">     771</span>                 :             : </span>
<span id="L772"><span class="lineNum">     772</span>                 :             : VP8LCollectColorBlueTransformsFunc VP8LCollectColorBlueTransforms;</span>
<span id="L773"><span class="lineNum">     773</span>                 :             : VP8LCollectColorRedTransformsFunc VP8LCollectColorRedTransforms;</span>
<span id="L774"><span class="lineNum">     774</span>                 :             : </span>
<span id="L775"><span class="lineNum">     775</span>                 :             : VP8LFastLog2SlowFunc VP8LFastLog2Slow;</span>
<span id="L776"><span class="lineNum">     776</span>                 :             : VP8LFastLog2SlowFunc VP8LFastSLog2Slow;</span>
<span id="L777"><span class="lineNum">     777</span>                 :             : </span>
<span id="L778"><span class="lineNum">     778</span>                 :             : VP8LCostFunc VP8LExtraCost;</span>
<span id="L779"><span class="lineNum">     779</span>                 :             : VP8LCostCombinedFunc VP8LExtraCostCombined;</span>
<span id="L780"><span class="lineNum">     780</span>                 :             : VP8LCombinedShannonEntropyFunc VP8LCombinedShannonEntropy;</span>
<span id="L781"><span class="lineNum">     781</span>                 :             : </span>
<span id="L782"><span class="lineNum">     782</span>                 :             : VP8LGetEntropyUnrefinedFunc VP8LGetEntropyUnrefined;</span>
<span id="L783"><span class="lineNum">     783</span>                 :             : VP8LGetCombinedEntropyUnrefinedFunc VP8LGetCombinedEntropyUnrefined;</span>
<span id="L784"><span class="lineNum">     784</span>                 :             : </span>
<span id="L785"><span class="lineNum">     785</span>                 :             : VP8LAddVectorFunc VP8LAddVector;</span>
<span id="L786"><span class="lineNum">     786</span>                 :             : VP8LAddVectorEqFunc VP8LAddVectorEq;</span>
<span id="L787"><span class="lineNum">     787</span>                 :             : </span>
<span id="L788"><span class="lineNum">     788</span>                 :             : VP8LVectorMismatchFunc VP8LVectorMismatch;</span>
<span id="L789"><span class="lineNum">     789</span>                 :             : VP8LBundleColorMapFunc VP8LBundleColorMap;</span>
<span id="L790"><span class="lineNum">     790</span>                 :             : </span>
<span id="L791"><span class="lineNum">     791</span>                 :             : VP8LPredictorAddSubFunc VP8LPredictorsSub[16];</span>
<span id="L792"><span class="lineNum">     792</span>                 :             : VP8LPredictorAddSubFunc VP8LPredictorsSub_C[16];</span>
<span id="L793"><span class="lineNum">     793</span>                 :             : </span>
<span id="L794"><span class="lineNum">     794</span>                 :             : extern VP8CPUInfo VP8GetCPUInfo;</span>
<span id="L795"><span class="lineNum">     795</span>                 :             : extern void VP8LEncDspInitSSE2(void);</span>
<span id="L796"><span class="lineNum">     796</span>                 :             : extern void VP8LEncDspInitSSE41(void);</span>
<span id="L797"><span class="lineNum">     797</span>                 :             : extern void VP8LEncDspInitNEON(void);</span>
<span id="L798"><span class="lineNum">     798</span>                 :             : extern void VP8LEncDspInitMIPS32(void);</span>
<span id="L799"><span class="lineNum">     799</span>                 :             : extern void VP8LEncDspInitMIPSdspR2(void);</span>
<span id="L800"><span class="lineNum">     800</span>                 :             : extern void VP8LEncDspInitMSA(void);</span>
<span id="L801"><span class="lineNum">     801</span>                 :             : </span>
<span id="L802"><span class="lineNum">     802</span>                 :<span class="tlaUNC">           0 : WEBP_DSP_INIT_FUNC(VP8LEncDspInit) {</span></span>
<span id="L803"><span class="lineNum">     803</span>                 :<span class="tlaUNC">           0 :   VP8LDspInit();</span></span>
<span id="L804"><span class="lineNum">     804</span>                 :             : </span>
<span id="L805"><span class="lineNum">     805</span>                 :             : #if !WEBP_NEON_OMIT_C_CODE</span>
<span id="L806"><span class="lineNum">     806</span>                 :<span class="tlaUNC">           0 :   VP8LSubtractGreenFromBlueAndRed = VP8LSubtractGreenFromBlueAndRed_C;</span></span>
<span id="L807"><span class="lineNum">     807</span>                 :             : </span>
<span id="L808"><span class="lineNum">     808</span>                 :<span class="tlaUNC">           0 :   VP8LTransformColor = VP8LTransformColor_C;</span></span>
<span id="L809"><span class="lineNum">     809</span>                 :             : #endif</span>
<span id="L810"><span class="lineNum">     810</span>                 :             : </span>
<span id="L811"><span class="lineNum">     811</span>                 :<span class="tlaUNC">           0 :   VP8LCollectColorBlueTransforms = VP8LCollectColorBlueTransforms_C;</span></span>
<span id="L812"><span class="lineNum">     812</span>                 :<span class="tlaUNC">           0 :   VP8LCollectColorRedTransforms = VP8LCollectColorRedTransforms_C;</span></span>
<span id="L813"><span class="lineNum">     813</span>                 :             : </span>
<span id="L814"><span class="lineNum">     814</span>                 :<span class="tlaUNC">           0 :   VP8LFastLog2Slow = FastLog2Slow_C;</span></span>
<span id="L815"><span class="lineNum">     815</span>                 :<span class="tlaUNC">           0 :   VP8LFastSLog2Slow = FastSLog2Slow_C;</span></span>
<span id="L816"><span class="lineNum">     816</span>                 :             : </span>
<span id="L817"><span class="lineNum">     817</span>                 :<span class="tlaUNC">           0 :   VP8LExtraCost = ExtraCost_C;</span></span>
<span id="L818"><span class="lineNum">     818</span>                 :<span class="tlaUNC">           0 :   VP8LExtraCostCombined = ExtraCostCombined_C;</span></span>
<span id="L819"><span class="lineNum">     819</span>                 :<span class="tlaUNC">           0 :   VP8LCombinedShannonEntropy = CombinedShannonEntropy_C;</span></span>
<span id="L820"><span class="lineNum">     820</span>                 :             : </span>
<span id="L821"><span class="lineNum">     821</span>                 :<span class="tlaUNC">           0 :   VP8LGetEntropyUnrefined = GetEntropyUnrefined_C;</span></span>
<span id="L822"><span class="lineNum">     822</span>                 :<span class="tlaUNC">           0 :   VP8LGetCombinedEntropyUnrefined = GetCombinedEntropyUnrefined_C;</span></span>
<span id="L823"><span class="lineNum">     823</span>                 :             : </span>
<span id="L824"><span class="lineNum">     824</span>                 :<span class="tlaUNC">           0 :   VP8LAddVector = AddVector_C;</span></span>
<span id="L825"><span class="lineNum">     825</span>                 :<span class="tlaUNC">           0 :   VP8LAddVectorEq = AddVectorEq_C;</span></span>
<span id="L826"><span class="lineNum">     826</span>                 :             : </span>
<span id="L827"><span class="lineNum">     827</span>                 :<span class="tlaUNC">           0 :   VP8LVectorMismatch = VectorMismatch_C;</span></span>
<span id="L828"><span class="lineNum">     828</span>                 :<span class="tlaUNC">           0 :   VP8LBundleColorMap = VP8LBundleColorMap_C;</span></span>
<span id="L829"><span class="lineNum">     829</span>                 :             : </span>
<span id="L830"><span class="lineNum">     830</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub[0] = PredictorSub0_C;</span></span>
<span id="L831"><span class="lineNum">     831</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub[1] = PredictorSub1_C;</span></span>
<span id="L832"><span class="lineNum">     832</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub[2] = PredictorSub2_C;</span></span>
<span id="L833"><span class="lineNum">     833</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub[3] = PredictorSub3_C;</span></span>
<span id="L834"><span class="lineNum">     834</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub[4] = PredictorSub4_C;</span></span>
<span id="L835"><span class="lineNum">     835</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub[5] = PredictorSub5_C;</span></span>
<span id="L836"><span class="lineNum">     836</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub[6] = PredictorSub6_C;</span></span>
<span id="L837"><span class="lineNum">     837</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub[7] = PredictorSub7_C;</span></span>
<span id="L838"><span class="lineNum">     838</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub[8] = PredictorSub8_C;</span></span>
<span id="L839"><span class="lineNum">     839</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub[9] = PredictorSub9_C;</span></span>
<span id="L840"><span class="lineNum">     840</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub[10] = PredictorSub10_C;</span></span>
<span id="L841"><span class="lineNum">     841</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub[11] = PredictorSub11_C;</span></span>
<span id="L842"><span class="lineNum">     842</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub[12] = PredictorSub12_C;</span></span>
<span id="L843"><span class="lineNum">     843</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub[13] = PredictorSub13_C;</span></span>
<span id="L844"><span class="lineNum">     844</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub[14] = PredictorSub0_C;  // &lt;- padding security sentinels</span></span>
<span id="L845"><span class="lineNum">     845</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub[15] = PredictorSub0_C;</span></span>
<span id="L846"><span class="lineNum">     846</span>                 :             : </span>
<span id="L847"><span class="lineNum">     847</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub_C[0] = PredictorSub0_C;</span></span>
<span id="L848"><span class="lineNum">     848</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub_C[1] = PredictorSub1_C;</span></span>
<span id="L849"><span class="lineNum">     849</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub_C[2] = PredictorSub2_C;</span></span>
<span id="L850"><span class="lineNum">     850</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub_C[3] = PredictorSub3_C;</span></span>
<span id="L851"><span class="lineNum">     851</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub_C[4] = PredictorSub4_C;</span></span>
<span id="L852"><span class="lineNum">     852</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub_C[5] = PredictorSub5_C;</span></span>
<span id="L853"><span class="lineNum">     853</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub_C[6] = PredictorSub6_C;</span></span>
<span id="L854"><span class="lineNum">     854</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub_C[7] = PredictorSub7_C;</span></span>
<span id="L855"><span class="lineNum">     855</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub_C[8] = PredictorSub8_C;</span></span>
<span id="L856"><span class="lineNum">     856</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub_C[9] = PredictorSub9_C;</span></span>
<span id="L857"><span class="lineNum">     857</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub_C[10] = PredictorSub10_C;</span></span>
<span id="L858"><span class="lineNum">     858</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub_C[11] = PredictorSub11_C;</span></span>
<span id="L859"><span class="lineNum">     859</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub_C[12] = PredictorSub12_C;</span></span>
<span id="L860"><span class="lineNum">     860</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub_C[13] = PredictorSub13_C;</span></span>
<span id="L861"><span class="lineNum">     861</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub_C[14] = PredictorSub0_C;  // &lt;- padding security sentinels</span></span>
<span id="L862"><span class="lineNum">     862</span>                 :<span class="tlaUNC">           0 :   VP8LPredictorsSub_C[15] = PredictorSub0_C;</span></span>
<span id="L863"><span class="lineNum">     863</span>                 :             : </span>
<span id="L864"><span class="lineNum">     864</span>                 :             :   // If defined, use CPUInfo() to overwrite some pointers with faster versions.</span>
<span id="L865"><span class="lineNum">     865</span>                 :<span class="tlaUNC">           0 :   if (VP8GetCPUInfo != NULL) {</span></span>
<span id="L866"><span class="lineNum">     866</span>                 :             : #if defined(WEBP_HAVE_SSE2)</span>
<span id="L867"><span class="lineNum">     867</span>                 :<span class="tlaUNC">           0 :     if (VP8GetCPUInfo(kSSE2)) {</span></span>
<span id="L868"><span class="lineNum">     868</span>                 :<span class="tlaUNC">           0 :       VP8LEncDspInitSSE2();</span></span>
<span id="L869"><span class="lineNum">     869</span>                 :             : #if defined(WEBP_HAVE_SSE41)</span>
<span id="L870"><span class="lineNum">     870</span>                 :<span class="tlaUNC">           0 :       if (VP8GetCPUInfo(kSSE4_1)) {</span></span>
<span id="L871"><span class="lineNum">     871</span>                 :<span class="tlaUNC">           0 :         VP8LEncDspInitSSE41();</span></span>
<span id="L872"><span class="lineNum">     872</span>                 :<span class="tlaUNC">           0 :       }</span></span>
<span id="L873"><span class="lineNum">     873</span>                 :             : #endif</span>
<span id="L874"><span class="lineNum">     874</span>                 :<span class="tlaUNC">           0 :     }</span></span>
<span id="L875"><span class="lineNum">     875</span>                 :             : #endif</span>
<span id="L876"><span class="lineNum">     876</span>                 :             : #if defined(WEBP_USE_MIPS32)</span>
<span id="L877"><span class="lineNum">     877</span>                 :             :     if (VP8GetCPUInfo(kMIPS32)) {</span>
<span id="L878"><span class="lineNum">     878</span>                 :             :       VP8LEncDspInitMIPS32();</span>
<span id="L879"><span class="lineNum">     879</span>                 :             :     }</span>
<span id="L880"><span class="lineNum">     880</span>                 :             : #endif</span>
<span id="L881"><span class="lineNum">     881</span>                 :             : #if defined(WEBP_USE_MIPS_DSP_R2)</span>
<span id="L882"><span class="lineNum">     882</span>                 :             :     if (VP8GetCPUInfo(kMIPSdspR2)) {</span>
<span id="L883"><span class="lineNum">     883</span>                 :             :       VP8LEncDspInitMIPSdspR2();</span>
<span id="L884"><span class="lineNum">     884</span>                 :             :     }</span>
<span id="L885"><span class="lineNum">     885</span>                 :             : #endif</span>
<span id="L886"><span class="lineNum">     886</span>                 :             : #if defined(WEBP_USE_MSA)</span>
<span id="L887"><span class="lineNum">     887</span>                 :             :     if (VP8GetCPUInfo(kMSA)) {</span>
<span id="L888"><span class="lineNum">     888</span>                 :             :       VP8LEncDspInitMSA();</span>
<span id="L889"><span class="lineNum">     889</span>                 :             :     }</span>
<span id="L890"><span class="lineNum">     890</span>                 :             : #endif</span>
<span id="L891"><span class="lineNum">     891</span>                 :<span class="tlaUNC">           0 :   }</span></span>
<span id="L892"><span class="lineNum">     892</span>                 :             : </span>
<span id="L893"><span class="lineNum">     893</span>                 :             : #if defined(WEBP_HAVE_NEON)</span>
<span id="L894"><span class="lineNum">     894</span>                 :             :   if (WEBP_NEON_OMIT_C_CODE ||</span>
<span id="L895"><span class="lineNum">     895</span>                 :             :       (VP8GetCPUInfo != NULL &amp;&amp; VP8GetCPUInfo(kNEON))) {</span>
<span id="L896"><span class="lineNum">     896</span>                 :             :     VP8LEncDspInitNEON();</span>
<span id="L897"><span class="lineNum">     897</span>                 :             :   }</span>
<span id="L898"><span class="lineNum">     898</span>                 :             : #endif</span>
<span id="L899"><span class="lineNum">     899</span>                 :             : </span>
<span id="L900"><span class="lineNum">     900</span>                 :             :   assert(VP8LSubtractGreenFromBlueAndRed != NULL);</span>
<span id="L901"><span class="lineNum">     901</span>                 :             :   assert(VP8LTransformColor != NULL);</span>
<span id="L902"><span class="lineNum">     902</span>                 :             :   assert(VP8LCollectColorBlueTransforms != NULL);</span>
<span id="L903"><span class="lineNum">     903</span>                 :             :   assert(VP8LCollectColorRedTransforms != NULL);</span>
<span id="L904"><span class="lineNum">     904</span>                 :             :   assert(VP8LFastLog2Slow != NULL);</span>
<span id="L905"><span class="lineNum">     905</span>                 :             :   assert(VP8LFastSLog2Slow != NULL);</span>
<span id="L906"><span class="lineNum">     906</span>                 :             :   assert(VP8LExtraCost != NULL);</span>
<span id="L907"><span class="lineNum">     907</span>                 :             :   assert(VP8LExtraCostCombined != NULL);</span>
<span id="L908"><span class="lineNum">     908</span>                 :             :   assert(VP8LCombinedShannonEntropy != NULL);</span>
<span id="L909"><span class="lineNum">     909</span>                 :             :   assert(VP8LGetEntropyUnrefined != NULL);</span>
<span id="L910"><span class="lineNum">     910</span>                 :             :   assert(VP8LGetCombinedEntropyUnrefined != NULL);</span>
<span id="L911"><span class="lineNum">     911</span>                 :             :   assert(VP8LAddVector != NULL);</span>
<span id="L912"><span class="lineNum">     912</span>                 :             :   assert(VP8LAddVectorEq != NULL);</span>
<span id="L913"><span class="lineNum">     913</span>                 :             :   assert(VP8LVectorMismatch != NULL);</span>
<span id="L914"><span class="lineNum">     914</span>                 :             :   assert(VP8LBundleColorMap != NULL);</span>
<span id="L915"><span class="lineNum">     915</span>                 :             :   assert(VP8LPredictorsSub[0] != NULL);</span>
<span id="L916"><span class="lineNum">     916</span>                 :             :   assert(VP8LPredictorsSub[1] != NULL);</span>
<span id="L917"><span class="lineNum">     917</span>                 :             :   assert(VP8LPredictorsSub[2] != NULL);</span>
<span id="L918"><span class="lineNum">     918</span>                 :             :   assert(VP8LPredictorsSub[3] != NULL);</span>
<span id="L919"><span class="lineNum">     919</span>                 :             :   assert(VP8LPredictorsSub[4] != NULL);</span>
<span id="L920"><span class="lineNum">     920</span>                 :             :   assert(VP8LPredictorsSub[5] != NULL);</span>
<span id="L921"><span class="lineNum">     921</span>                 :             :   assert(VP8LPredictorsSub[6] != NULL);</span>
<span id="L922"><span class="lineNum">     922</span>                 :             :   assert(VP8LPredictorsSub[7] != NULL);</span>
<span id="L923"><span class="lineNum">     923</span>                 :             :   assert(VP8LPredictorsSub[8] != NULL);</span>
<span id="L924"><span class="lineNum">     924</span>                 :             :   assert(VP8LPredictorsSub[9] != NULL);</span>
<span id="L925"><span class="lineNum">     925</span>                 :             :   assert(VP8LPredictorsSub[10] != NULL);</span>
<span id="L926"><span class="lineNum">     926</span>                 :             :   assert(VP8LPredictorsSub[11] != NULL);</span>
<span id="L927"><span class="lineNum">     927</span>                 :             :   assert(VP8LPredictorsSub[12] != NULL);</span>
<span id="L928"><span class="lineNum">     928</span>                 :             :   assert(VP8LPredictorsSub[13] != NULL);</span>
<span id="L929"><span class="lineNum">     929</span>                 :             :   assert(VP8LPredictorsSub[14] != NULL);</span>
<span id="L930"><span class="lineNum">     930</span>                 :             :   assert(VP8LPredictorsSub[15] != NULL);</span>
<span id="L931"><span class="lineNum">     931</span>                 :             :   assert(VP8LPredictorsSub_C[0] != NULL);</span>
<span id="L932"><span class="lineNum">     932</span>                 :             :   assert(VP8LPredictorsSub_C[1] != NULL);</span>
<span id="L933"><span class="lineNum">     933</span>                 :             :   assert(VP8LPredictorsSub_C[2] != NULL);</span>
<span id="L934"><span class="lineNum">     934</span>                 :             :   assert(VP8LPredictorsSub_C[3] != NULL);</span>
<span id="L935"><span class="lineNum">     935</span>                 :             :   assert(VP8LPredictorsSub_C[4] != NULL);</span>
<span id="L936"><span class="lineNum">     936</span>                 :             :   assert(VP8LPredictorsSub_C[5] != NULL);</span>
<span id="L937"><span class="lineNum">     937</span>                 :             :   assert(VP8LPredictorsSub_C[6] != NULL);</span>
<span id="L938"><span class="lineNum">     938</span>                 :             :   assert(VP8LPredictorsSub_C[7] != NULL);</span>
<span id="L939"><span class="lineNum">     939</span>                 :             :   assert(VP8LPredictorsSub_C[8] != NULL);</span>
<span id="L940"><span class="lineNum">     940</span>                 :             :   assert(VP8LPredictorsSub_C[9] != NULL);</span>
<span id="L941"><span class="lineNum">     941</span>                 :             :   assert(VP8LPredictorsSub_C[10] != NULL);</span>
<span id="L942"><span class="lineNum">     942</span>                 :             :   assert(VP8LPredictorsSub_C[11] != NULL);</span>
<span id="L943"><span class="lineNum">     943</span>                 :             :   assert(VP8LPredictorsSub_C[12] != NULL);</span>
<span id="L944"><span class="lineNum">     944</span>                 :             :   assert(VP8LPredictorsSub_C[13] != NULL);</span>
<span id="L945"><span class="lineNum">     945</span>                 :             :   assert(VP8LPredictorsSub_C[14] != NULL);</span>
<span id="L946"><span class="lineNum">     946</span>                 :             :   assert(VP8LPredictorsSub_C[15] != NULL);</span>
<span id="L947"><span class="lineNum">     947</span>                 :<span class="tlaUNC">           0 : }</span></span>
<span id="L948"><span class="lineNum">     948</span>                 :             : </span>
<span id="L949"><span class="lineNum">     949</span>                 :             : //------------------------------------------------------------------------------</span>
        </pre>
              </td>
            </tr>
          </table>
          <br>

          <table width="100%" border=0 cellspacing=0 cellpadding=0>
            <tr><td class="ruler"><img src="../../../glass.png" width=3 height=3 alt=""></td></tr>
            <tr><td class="versionInfo">Generated by: <a href="https://github.com//linux-test-project/lcov" target="_parent">LCOV version 2.0-1</a></td></tr>
          </table>
          <br>

</body>
</html>
